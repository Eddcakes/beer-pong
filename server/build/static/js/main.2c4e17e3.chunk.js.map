{"version":3,"sources":["ThemeContext.js","ThemeProvider.js","AuthContext.js","hooks/useProvideAuth.js","AuthProvider.js","theme/base.js","theme/utils.js","theme/dark.js","theme/index.js","theme/casual.js","theme/vb.js","theme/mixedFruit.js","theme/carling.js","hooks/useAuth.js","components/AuthorisedRoute.js","components/Button.js","components/Card.js","components/Checkbox.js","components/Container.js","components/Cup.js","components/HoverElement.js","components/Cups.js","components/CupsView.js","components/Decoration.js","hooks/useTheme.js","components/Divider.js","tableMachine.js","queries/fetchGameById.js","queries/fetchGames.js","queries/fetchGamesByTournamentId.js","queries/fetchNews.js","queries/fetchPlayerOverview.js","queries/fetchPlayers.js","queries/fetchPreferences.js","queries/fetchRecords.js","queries/fetchTournamentById.js","queries/fetchTournaments.js","queries/fetchVenues.js","queries/postNewGame.js","queries/postPreferences.js","queries/postSaveGamePlay.js","components/GamePlay.js","components/GameView.js","components/Nav.js","hooks/useWindowSize.js","assets/beer-pong.svg","components/Logo.js","components/Menu.js","components/Input.js","searchPages.js","components/Search.js","components/Header.js","components/InputNumber.js","components/LoggedOutRoute.js","components/Match.js","components/MatchGrid.js","components/Modal.js","components/PinnedNews.js","components/News.js","components/PlayerOverview.js","components/PlayerPicker.js","components/Refreshing.js","components/Select.js","components/Swatch.js","components/ThemeSwitcher.js","components/Toggle.js","components/TournamentDetail.js","assets/evt-placeholder.jpg","components/TournamentList.js","components/UserPreferences.js","pages/E404.js","pages/Game.js","pages/Games.js","pages/Home.js","pages/NewGame.js","pages/Player.js","pages/Records.js","pages/Settings.js","pages/SignIn.js","pages/SignUp.js","pages/Tournament.js","pages/Versus.js","pages/Test.js","App.js","index.js"],"names":["ThemeContext","createContext","ThemeProvider","theme","changeTheme","children","Provider","value","switchTheme","AuthContext","postSignUp","data","a","fetch","process","method","body","JSON","stringify","headers","credentials","signup","json","dataJson","fetchSession","userSession","userSessionJson","postSignOut","signOut","signOutJson","postSignIn","signIn","AuthProvider","auth","useState","user","setUser","signUp","details","signUpNewUser","error","postError","creds","signMeIn","signOutResponse","useEffect","checkSession","useProvideAuth","extending","newTheme","base","primary","secondary","negative","positive","primaryText","linkText","primaryBackground","secondaryBackground","dark","themes","casual","primaryLight","primaryActive","vb","mixedFruit","inputBackground","carling","secondaryText","useAuth","useContext","AuthorisedRoute","rest","render","location","to","pathname","state","from","buttonVariant","buttonColor","Button","variant","color","fullWidth","text","handleClick","loading","disabled","props","customisations","bg","borderColor","hoverBg","hoverBorder","hoverText","activeBg","activeText","squareClasses","regularClasses","LinkAsButton","classes","square","className","onClick","Card","title","renderTitle","isValidElement","Checkbox","label","name","checked","handleChange","htmlFor","id","type","onChange","Container","maxW","maxH","Cup","pickCup","rerack","rim","cx","x","cy","y","r","data-name","Number","textAnchor","style","fontSize","length","HoverElement","size","height","width","Cups","side","cups","forwardRef","gameSize","mouseExit","newMove","svgCoord","movingState","lastHover","selectedCup","lines","viewSize","lineList","ii","push","x1","y1","x2","y2","createGridLines","viewBox","ref","onMouseMove","onMouseLeave","undefined","map","strokeWidth","filter","cup","hit","CupsView","Decoration","clipPath","top","borderWidth","Divider","createInitialCups","owner","handleHomeCups","ctx","evt","time","Date","toISOString","newHome","homeCups","rimCup","timestamp","hitCup","handleHomeCupsLeft","homeCupsLeft","handleHomeCupsForfeit","alreadyHit","forfeitCups","handleHomeCupsLeftForfeit","handleAwayCups","newAway","awayCups","handleAwayCupsLeft","awayCupsLeft","handleAwayCupsForfeit","handleAwayCupsLeftForfeit","checkLastCup","context","event","checkWin","isHovering","hoverMoved","clampedX","floorBound","position","clampedY","homeReracked","homeCupRerackComplete","awayReracked","awayCupRerackComplete","num","lower","upper","Math","floor","gameId","game","resp","Error","fetchGames","games","player","fetchNews","news","playerId","overviewResp","overview","fetchPlayers","playersJson","fetchPreferences","fetchRecords","records","fetchTournaments","tournaments","fetchVenues","venuesJson","postNewGame","newGame","newGameJson","postPreferences","newPreferences","preferences","postSaveGamePlay","updateGame","GamePlay","gameDetails","queryClient","useQueryClient","gameMutate","useMutation","onError","onSuccess","invalidateQueries","tableMachine","Machine","initial","states","playing","on","PICKCUP","actions","target","FORFEIT_HOME","FORFEIT_AWAY","RERACK","modal","SINK","CATCH","cond","SPILL","OTHER","RIM","CANCEL","SAVE","idle","moving","MOUSEMOVE","assign","NEWPOS","cupsNewPos","cupName","restOfCups","newPosition","EXIT","finish","selectCup","getAttribute","updateCups","homeCupRimCount","awayCupRimCount","clearSelected","commitSudoku","storeHomeCups","preRackHomeCups","storeAwayCups","preRackAwayCups","restoreCups","clearPreRack","saveCups","guards","createMachineFromState","game_table","useMachine","send","centreAdjustment","cupsRef","useRef","current","point","createSVGPoint","clientX","clientY","cursorPoint","matrixTransform","getScreenCTM","inverse","handleSubmit","preventDefault","toStringify","player1","player2","forfeit","table","mutate","matches","home_name","_","away_name","Modal","isOpen","dismiss","GameView","home_cups_left","away_cups_left","Nav","window","innerWidth","innerHeight","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","useWindowSize","exact","StyledNavLink","activeClassName","Logo","src","logo","alt","Menu","setIsOpen","closeMenu","useLocation","history","useHistory","document","overflow","tabIndex","MenuItem","MenuSpacer","Input","placeholder","required","helpText","errorMsg","inputProps","searchPages","link","description","Search","items","inputFocus","setInputFocus","searchText","setSearchText","onFocus","onBlur","relatedTarget","Suggestions","page","cleanText","trim","toLowerCase","join","indexOf","setCurrent","handleHover","itemIndex","keyPressHandler","key","idx","SearchItem","item","active","itemFocus","onMouseOver","data-path","Header","InputNumber","min","max","LoggedOutRoute","updatePageTitle","Match","isWinner","cupsLeft","venue","tournament_ID","stage","date","formatDateString","home_ID","away_ID","dateString","split","reverse","MatchGrid","role","aria-modal","aria-labelledby","PinnedNews","maxHeight","small","class","medium","large","xlarge","News","useQuery","isLoading","article","ClipNews","content","clipRef","showExpand","setShowExpand","expand","setExpand","getBoundingClientRect","remarkPlugins","gfm","PlayerOverview","showHeaders","ColumnHeader","labels","show","last","ColumnPlayer","playerData","Cell","header","forfeits","homeWins","awayWins","toFixed","quarterFinals","semiFinals","finals","finalsWon","PlayerPicker","playerNames","selected","selectPlayer","showModal","setShowModal","toggleModal","toString","aria-selected","Refreshing","useIsFetching","fill","stroke","xmlns","strokeLinecap","strokeLinejoin","d","Select","Swatch","themeNames","ThemeSwitcher","Consumer","Toggle","toggle","TournamentDetail","fetchGamesByTournamentId","isLoadingGames","fetchTournamentById","tournament","isLoadingTournament","TournamentList","t","Short","image","shortDate","toLocaleDateString","placeholderImg","schema","Joi","object","keys","avatar_link","string","uri","UserPreferences","avatarLink","setPreferences","enabled","mutation","setErrorMsg","saveChanges","validPreferences","valid","validate","message","old","E404","Game","useParams","fetchGameById","CardTitle","home","away","number","locked","notes","access","Games","Home","initialForm","homeForfeit","awayForfeit","reducer","action","fieldName","NewGame","useReducer","formState","dispatch","pastGame","setPastGame","players","venues","handleChangeNumber","handleForfeitCheck","includes","validForm","initialTable","firstThrow","winner","turns","cupNewPos","stack","values","created","console","log","messages","integer","less","maxGameSize","greater","minGameSize","boolean","onSubmit","Player","setLoading","setPlayerData","playerOverview","setPlayerOverview","playerRecords","setPlayerRecords","playerNicks","setPlayerNicks","recentGames","setRecentGames","getPlayer","fetchPlayer","then","getOverview","fetchPlayerOverview","getRecords","fetchPlayerRecords","getNicks","fetchNicks","nicks","getRecentGames","fetchRecentGames","recent","Promise","all","nick","record","Records","groupedRecords","useMemo","grouped","forEach","Object","entries","RecordList","recordType","DisplayRecords","player_ID","Settings","username","regex","password","SignIn","setUsername","setPassword","validUser","signInCreds","replace","confirmPassword","SignUp","email","setEmail","setConfirmPassword","newUserCreds","signupResp","aria-describedby","minLength","Tournament","tournamentId","Versus","setPlayers","loadingPlayerList","errorPlayerList","playerList","gameData","setGameData","useCallback","previous","sp","isIntOrStringInt","splitPath","player1Id","player2Id","some","response","param","isInteger","Test","testGame","defaultTheme","localStorage","getItem","QueryClient","App","setTheme","pageTitle","setPageTitle","newTitle","themeVar","themeObject","root","documentElement","property","setProperty","applyTheme","setItem","QueryClientProvider","client","path","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2c4e17e3.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport default ThemeContext;\r\n","import React from 'react';\r\nimport ThemeContext from './ThemeContext';\r\n\r\nexport function ThemeProvider({ theme, changeTheme, children }) {\r\n  return (\r\n    <ThemeContext.Provider value={{ theme: theme, switchTheme: changeTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n","import { createContext } from 'react';\r\n\r\nexport const AuthContext = createContext();\r\n\r\n//export default AuthContext;\r\n","import { useEffect, useState } from 'react';\r\n\r\nexport function useProvideAuth() {\r\n  const [user, setUser] = useState(null);\r\n\r\n  const signUp = async (details) => {\r\n    try {\r\n      const signUpNewUser = await postSignUp(details);\r\n      if (signUpNewUser.error) {\r\n        return signUpNewUser;\r\n      }\r\n      setUser(signUpNewUser.user);\r\n      return signUpNewUser;\r\n    } catch (err) {\r\n      return { postError: 'failed to post' };\r\n    }\r\n  };\r\n\r\n  const signIn = async (creds) => {\r\n    try {\r\n      const signMeIn = await postSignIn(creds);\r\n      setUser(signMeIn.user);\r\n      return signMeIn;\r\n    } catch (err) {\r\n      return { postError: 'failed to post' };\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      const signOutResponse = await postSignOut();\r\n      setUser(null);\r\n      return signOutResponse;\r\n    } catch (err) {\r\n      // cant reach\r\n    }\r\n    setUser(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // if user changes then set the object as appropriate\r\n    async function checkSession() {\r\n      const userSession = await fetchSession();\r\n      setUser(userSession.user);\r\n    }\r\n    checkSession();\r\n  }, []);\r\n\r\n  return {\r\n    user,\r\n    signUp,\r\n    signIn,\r\n    signOut,\r\n  };\r\n}\r\n\r\nasync function postSignUp(data) {\r\n  const signup = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/auth/signup`,\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  );\r\n  const dataJson = await signup.json();\r\n  return dataJson;\r\n}\r\n\r\nasync function fetchSession() {\r\n  const userSession = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1`,\r\n    { credentials: 'include' }\r\n  );\r\n  const userSessionJson = await userSession.json();\r\n  return userSessionJson;\r\n}\r\n\r\nasync function postSignOut() {\r\n  const signOut = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/auth/signout`,\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  );\r\n  const signOutJson = await signOut.json();\r\n  return signOutJson;\r\n}\r\n\r\nasync function postSignIn(data) {\r\n  const signIn = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/auth/signin`,\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  );\r\n  const dataJson = await signIn.json();\r\n  return dataJson;\r\n}\r\n","import { AuthContext } from './AuthContext';\r\nimport { useProvideAuth } from './hooks/useProvideAuth';\r\n\r\nexport function AuthProvider({ children }) {\r\n  const auth = useProvideAuth();\r\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\r\n}\r\n","export const base = {\r\n  primary: '#61DAFB',\r\n  secondary: '#254E70',\r\n  negative: '#e45b78',\r\n  positive: '#A3D9B1',\r\n  primaryText: '#333',\r\n  linkText: '#1976d2',\r\n  primaryBackground: '#efefef',\r\n  secondaryBackground: '#F6F9FC',\r\n};\r\n","import { themes } from './index';\r\n\r\nexport const mapTheme = (themeVar) => {\r\n  return {\r\n    '--color-primary': themeVar.primary || '',\r\n    '--color-primary-light': themeVar.primaryLight || '',\r\n    '--color-primary-active': themeVar.primaryActive || '',\r\n    '--color-secondary': themeVar.secondary || '',\r\n    '--color-positive': themeVar.positive || '',\r\n    '--color-negative': themeVar.negative || '',\r\n    '--color-primary-text': themeVar.primaryText || '',\r\n    '--color-secondary-text': themeVar.secondaryText || '',\r\n    '--color-input-background': themeVar.inputBackground || '',\r\n    '--color-link-text': themeVar.linkText || '',\r\n    '--primary-background': themeVar.primaryBackground || '',\r\n    '--sec-background': themeVar.secondaryBackground || '',\r\n  };\r\n};\r\n\r\nexport const applyTheme = (theme) => {\r\n  const themeObject = mapTheme(themes[theme]);\r\n  if (!themeObject) return;\r\n\r\n  const root = document.documentElement;\r\n\r\n  Object.keys(themeObject).forEach((property) => {\r\n    if (property === 'name') return;\r\n    root.style.setProperty(property, themeObject[property]);\r\n  });\r\n};\r\n\r\nexport const extend = (extending, newTheme) => {\r\n  return { ...extending, ...newTheme };\r\n};\r\n","// example of extending a theme\r\n\r\nimport { extend } from './utils';\r\nimport { base } from './base';\r\n\r\nexport const dark = extend(base, {\r\n  primaryBackground: '#444444',\r\n  secondaryBackground: '#7b7b7b',\r\n  primaryText: '#fff',\r\n});\r\n","import { base } from './base';\r\nimport { dark } from './dark';\r\nimport { casual } from './casual';\r\nimport { vb } from './vb';\r\nimport { mixedFruit } from './mixedFruit';\r\nimport { carling } from './carling';\r\nexport * from './base';\r\nexport * from './utils';\r\n\r\nexport const DEFAULT_THEME = 'carling';\r\n\r\nexport const themes = { base, dark, casual, vb, mixedFruit, carling };\r\n","export const casual = {\r\n  primary: '#3B82F6',\r\n  primaryLight: '#93C5FD',\r\n  primaryActive: '#60A5FA',\r\n  secondary: '#E8EBF7',\r\n  negative: '#DE1A1A',\r\n  positive: '#68EDC6',\r\n  primaryText: '#1D4ED8',\r\n  linkText: '#1976d2',\r\n  primaryBackground: '#D78521',\r\n  secondaryBackground: '#F2D398',\r\n};\r\n","export const vb = {\r\n  primary: '#093A16',\r\n  primaryLight: '#148633',\r\n  primaryActive: '#19AC41',\r\n  secondary: '#D33020',\r\n  positive: '#2FD158',\r\n  negative: '#861E14',\r\n  primaryText: '#0D3918',\r\n  linkText: '#1976d2',\r\n  primaryBackground: '#f1eedd',\r\n  secondaryBackground: '#fff',\r\n};\r\n","export const mixedFruit = {\r\n  primary: '#6366F1',\r\n  primaryLight: '#C4B5FD',\r\n  primaryActive: '#A78BFA',\r\n  secondary: '#F7C259',\r\n  positive: '#2FD158',\r\n  negative: '#861E14',\r\n  primaryText: '#C31547',\r\n  inputBackground: '#FDF2F8',\r\n  linkText: '#1976d2',\r\n  primaryBackground: '#ECFDF5',\r\n  secondaryBackground: '#FCE7F3',\r\n};\r\n\r\n/*\r\n  primary: '#E84C40',\r\n  primaryLight: '#FF6C46',\r\n  primaryActive: '#FF5F46',\r\n*/\r\n","export const carling = {\r\n  primary: '#da291c', //#D12510\r\n  primaryLight: '#B11E0C', //#b92116\r\n  primaryActive: '#7D1508',\r\n  secondary: '#000',\r\n  positive: '#2FD158',\r\n  negative: '#B91C1C',\r\n  primaryText: '#000',\r\n  secondaryText: '#fff',\r\n  linkText: '#337ab7',\r\n  primaryBackground: '#fff',\r\n  secondaryBackground: '#F5F5F5',\r\n};\r\n\r\n/*\r\nwould i want to add theme decorations?\r\n.text {\r\n  position: relative;\r\n  width: 5em;\r\n  margin: 2em;\r\n}\r\n.text::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  background-color: black;\r\n  height: 30px;\r\n  width: 100%;\r\n  left: 0;\r\n  top: -30px;\r\n}\r\n.text::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  right: 0;\r\n  border-width: 0 12px 12px 0;\r\n  border-color: red #fff red #fff;\r\n  border-style: solid;\r\n  transform: rotate(90deg);\r\n  top: -12px;\r\n}\r\n*/\r\n","import { useContext } from 'react';\r\n\r\nimport { AuthContext } from '../AuthContext';\r\n\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport { useAuth } from '../hooks/useAuth';\r\n\r\nexport function AuthorisedRoute({ children, ...rest }) {\r\n  let auth = useAuth();\r\n  if (auth.user === null) {\r\n    return <div>loading session</div>;\r\n  }\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        auth.user ? (\r\n          children\r\n        ) : (\r\n          <Redirect to={{ pathname: '/signin', state: { from: location } }} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\n/* \r\nTo work with different levels of access could use something like this. \r\nNeed to remember to add level to backend auth\r\n\r\n  const accessLevels = [\r\n    { name: 'admin', level: 5},\r\n    { name: 'creator', level: 1},\r\n  ]\r\n\r\n  export function AuthorisedRoute({children, ...rest}) {\r\n  let auth = useAuth();\r\n  const checkRole = (role) => {\r\n    //minimum role required\r\n    if (auth.user.role.level >= role.level) {\r\n      return (children)\r\n    }\r\n    // does not match minimum role\r\n    return (\r\n      <Unauthorised />\r\n    )\r\n  }\r\n  return (\r\n    <Route {...rest}\r\n    render={ ({location}) => (auth.user \r\n    ? checkRole(access)\r\n    : <Redirect to={{pathname: '/signin', state: { from: location}}} />)\r\n    }\r\n    />\r\n  )\r\n}\r\n*/\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n//assessibility concerns\r\nexport const buttonVariant = {\r\n  square: 'square',\r\n  regular: 'regular',\r\n};\r\n\r\nexport const buttonColor = {\r\n  outlined: 'outlined',\r\n  primary: 'primary',\r\n  secondary: 'secondary',\r\n};\r\n\r\nexport function Button({\r\n  variant = 'regular',\r\n  color = 'primary',\r\n  fullWidth = false,\r\n  text,\r\n  handleClick = () => {},\r\n  loading = false,\r\n  to,\r\n  disabled = false,\r\n  ...props\r\n}) {\r\n  let customisations = {\r\n    bg: 'bg-primary',\r\n    text: 'text-secondary-text',\r\n    borderColor: 'border-primary-light',\r\n    hoverBg: 'hover:bg-primary-light',\r\n    hoverBorder: 'hover:border-primary-active',\r\n    hoverText: 'hover:text-white',\r\n    activeBg: 'active:bg-primary-active',\r\n    activeText: 'active:text-white',\r\n  };\r\n  switch (color) {\r\n    case buttonColor.primary:\r\n      customisations = {\r\n        ...customisations,\r\n        bg: 'bg-primary',\r\n        text: 'text-secondary-text',\r\n        borderColor: 'border-primary-light',\r\n        hoverBg: 'hover:bg-primary-light',\r\n        hoverBorder: 'hover:border-primary-active',\r\n        hoverText: 'hover:text-white',\r\n        activeBg: 'active:bg-primary-active',\r\n        activeText: 'active:text-white',\r\n      };\r\n      break;\r\n    case buttonColor.outlined:\r\n      customisations = {\r\n        ...customisations,\r\n        bg: 'bg-transparent',\r\n        text: 'text-primary-text',\r\n      };\r\n      break;\r\n    case buttonColor.secondary:\r\n      customisations = {\r\n        ...customisations,\r\n        bg: 'bg-secondary',\r\n      };\r\n      break;\r\n    default:\r\n    //customisations already set\r\n  }\r\n  const squareClasses = `\r\n  h-28\r\n  w-28\r\n  ${customisations.bg}\r\n  ${customisations.text}\r\n  font-semibold\r\n  py-2\r\n  px-4 \r\n  border\r\n  ${customisations.borderColor}\r\n  border-b-4 \r\n  rounded\r\n  select-none\r\n  origin-bottom\r\n  transform      \r\n  duration-75\r\n  ease-in-out\r\n  active:scale-y-95\r\n  ${customisations.hoverBg}\r\n  ${customisations.hoverBorder}\r\n  ${customisations.hoverText}\r\n  ${customisations.activeBg}\r\n  ${customisations.activeText}\r\n  active:border-b\r\n  focus:outline-none\r\n  disabled:cursor-not-allowed\r\n  disabled:bg-primary-active\r\n  disabled:border-primary-active\r\n  disabled:text-white\r\n  disabled:scale-y-95\r\n  `;\r\n  const regularClasses = `\r\n  h-12\r\n  font-semibold\r\n  py-2\r\n  px-4 \r\n  border\r\n  border-primary\r\n  rounded\r\n  border-b-4\r\n  active:border-b\r\n  focus:outline-none\r\n  w-full\r\n  ${!fullWidth && 'md:w-auto'}\r\n  transform \r\n  duration-75\r\n  ease-in-out\r\n  active:scale-y-95\r\n  origin-bottom\r\n  select-none\r\n  ${customisations.bg}\r\n  ${customisations.text}\r\n  ${customisations.borderColor}\r\n  ${customisations.hoverBg}\r\n  ${customisations.hoverBorder}\r\n  ${customisations.hoverText}\r\n  ${customisations.activeBg}\r\n  ${customisations.activeText}\r\n  disabled:cursor-not-allowed\r\n  disabled:bg-primary-active\r\n  disabled:border-primary-active\r\n  disabled:text-white\r\n  disabled:scale-y-95\r\n  `;\r\n  if (to) {\r\n    return (\r\n      <LinkAsButton\r\n        to={to}\r\n        classes={\r\n          variant === buttonVariant.square ? squareClasses : regularClasses\r\n        }\r\n        square={variant === buttonVariant.square}\r\n        text={text}\r\n      />\r\n    );\r\n  }\r\n  if (variant === buttonVariant.square) {\r\n    return (\r\n      <button\r\n        className={squareClasses}\r\n        onClick={handleClick}\r\n        disabled={disabled}\r\n        {...props}\r\n      >\r\n        <span className='items-center text-center pointer-events-none'>\r\n          {text}\r\n        </span>\r\n      </button>\r\n    );\r\n  }\r\n  return (\r\n    <button\r\n      className={regularClasses}\r\n      onClick={handleClick}\r\n      disabled={disabled}\r\n      {...props}\r\n    >\r\n      {text}\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction LinkAsButton({ to, classes, text, square }) {\r\n  if (square) {\r\n    return (\r\n      <Link className={`${classes} inline-block`} to={to}>\r\n        <span className='items-center text-center'>{text}</span>\r\n      </Link>\r\n    );\r\n  }\r\n  return (\r\n    <Link className={`${classes} inline-block`} to={to}>\r\n      {text}\r\n    </Link>\r\n  );\r\n}\r\n\r\n/* \r\ntailwind config\r\nadded active for scale, border, margin\r\nadded press for spacing (3px)\r\nas border width is in px but spacing all defined in rem we couldnt get exact\r\nadded disabled\r\n*/\r\n\r\n/*\r\nPicture button\r\n<span> background image </span> absolute \r\n<span> background mask color </span>\r\n<span> <span>text</span> <span>icon</span> </span> flex\r\n*/\r\n","import React, { isValidElement } from 'react';\r\n\r\nexport function Card({ title, children }) {\r\n  let renderTitle = null;\r\n  /* allow using own component */\r\n  if (typeof title === 'string') {\r\n    renderTitle = (\r\n      <h2 className='text-3xl font-semibold text-left text-primary-text py-2'>\r\n        {title}\r\n      </h2>\r\n    );\r\n  } else if (isValidElement(title)) {\r\n    renderTitle = title;\r\n  }\r\n  return (\r\n    <div className='bg-sec-background rounded-lg p-6'>\r\n      <div>{renderTitle}</div>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","export function Checkbox({ label, name, checked, handleChange }) {\r\n  return (\r\n    <div>\r\n      <label htmlFor={name} className='pr-3'>\r\n        {label}\r\n      </label>\r\n      <input\r\n        name={name}\r\n        id={name}\r\n        type='checkbox'\r\n        onChange={handleChange}\r\n        checked={checked}\r\n        className='form-checkbox h-5 w-5'\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n// helper to keep content a nice max-width\r\n\r\nexport function Container({ maxW = '', maxH = '', children }) {\r\n  return (\r\n    <div className={`container mx-auto p-6 space-y-4 ${maxW} ${maxH}`}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","export function Cup({ details, pickCup, rerack }) {\r\n  const rad = 2;\r\n  if (details?.rim) {\r\n    return (\r\n      <g>\r\n        <circle\r\n          cx={details.x}\r\n          cy={details.y}\r\n          r={rad}\r\n          name={details.name}\r\n          className='cursor-pointer'\r\n          data-name={details.name}\r\n          onClick={pickCup}\r\n        />\r\n        <text\r\n          x={details.x}\r\n          y={Number(details.y) + 0.5}\r\n          textAnchor='middle'\r\n          className='pointer-events-none fill-current text-red-500'\r\n          style={{ fontSize: '0.1rem' }}\r\n        >\r\n          {details.rim.length}\r\n        </text>\r\n      </g>\r\n    );\r\n  }\r\n  return (\r\n    <circle\r\n      cx={details.x}\r\n      cy={details.y}\r\n      r={rad}\r\n      name={details.name}\r\n      className='cursor-pointer'\r\n      data-name={details.name}\r\n      onClick={pickCup}\r\n    />\r\n  );\r\n}\r\n","export function HoverElement({ x, y, size = 4 }) {\r\n  if (x != null || y != null) {\r\n    return (\r\n      <rect\r\n        x={x}\r\n        y={y}\r\n        height={size}\r\n        width={size}\r\n        className='fill-current text-blue-500 opacity-25'\r\n      />\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n","import { Cup } from './Cup';\r\nimport { HoverElement } from './HoverElement';\r\n\r\nexport function Cups({\r\n  side,\r\n  cups,\r\n  forwardRef,\r\n  gameSize = 6,\r\n  mouseExit,\r\n  pickCup,\r\n  newMove,\r\n  svgCoord,\r\n  rerack,\r\n  movingState,\r\n  lastHover,\r\n  selectedCup,\r\n}) {\r\n  const lines = createGridLines(gameSize);\r\n  const highlightSize = 4; //\r\n  if (Number(gameSize) === 10) {\r\n    return <svg viewBox='0 0 12 12' data-name={`${side}Svg`}></svg>;\r\n  }\r\n  return (\r\n    <div className='grid justify-center pb-4'>\r\n      <svg\r\n        viewBox='0 0 12 12'\r\n        height='15em'\r\n        width='15em'\r\n        data-name={`${side}Svg`}\r\n        ref={forwardRef}\r\n        onMouseMove={newMove}\r\n        onMouseLeave={mouseExit}\r\n        onClick={movingState ? svgCoord : undefined} //pickspot\r\n        className='border'\r\n      >\r\n        {rerack &&\r\n          lines.map(({ x1, y1, x2, y2 }) => (\r\n            <line\r\n              key={`${x1}${x2}${y1}${y2}`}\r\n              x1={x1}\r\n              x2={x2}\r\n              y1={y1}\r\n              y2={y2}\r\n              className='stroke-current text-gray-500'\r\n              strokeWidth={0.1}\r\n            />\r\n          ))}\r\n        {movingState && side === selectedCup?.side && (\r\n          <HoverElement x={lastHover.x} y={lastHover.y} size={highlightSize} />\r\n        )}\r\n        {cups\r\n          .filter((cup) => !cup.hit)\r\n          .map((cup) => {\r\n            return (\r\n              <Cup\r\n                details={cup}\r\n                key={cup.name}\r\n                rerack={rerack}\r\n                pickCup={pickCup}\r\n              />\r\n            );\r\n          })}\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction createGridLines(size) {\r\n  const viewSize = size * 2;\r\n  let lineList = [];\r\n  for (let ii = 0; ii < viewSize; ii++) {\r\n    lineList.push({ x1: 0, y1: ii, x2: viewSize, y2: ii });\r\n    lineList.push({ x1: ii, y1: 0, x2: ii, y2: viewSize });\r\n  }\r\n  return lineList;\r\n}\r\n","import { Cup } from './Cup';\r\n\r\nexport function CupsView({ side, cups, gameSize = 6 }) {\r\n  if (Number(gameSize) === 10) {\r\n    return <svg viewBox='0 0 12 12' data-name={`${side}Svg`}></svg>;\r\n  }\r\n  return (\r\n    <div className='grid justify-center pb-4'>\r\n      <svg\r\n        viewBox='0 0 12 12'\r\n        height='15em'\r\n        width='15em'\r\n        data-name={`${side}Svg`}\r\n        className='border'\r\n      >\r\n        {cups\r\n          .filter((cup) => !cup.hit)\r\n          .map((cup) => {\r\n            return (\r\n              <Cup\r\n                details={cup}\r\n                key={cup.name}\r\n                rerack={undefined}\r\n                pickCup={undefined}\r\n              />\r\n            );\r\n          })}\r\n      </svg>\r\n    </div>\r\n  );\r\n}\r\n","import { useTheme } from '../hooks/useTheme';\r\n\r\nexport function Decoration() {\r\n  /* not all themes will have a decoration */\r\n  let current = useTheme();\r\n  if (current.theme === 'carling') {\r\n    return (\r\n      <div\r\n        className='h-7 w-24 relative bg-secondary self-center transform -rotate-12'\r\n        style={{\r\n          clipPath: 'polygon(5% 0%, 0% 100%, 83.5% 100%, 95% 53%, 100% 0%)',\r\n        }}\r\n      >\r\n        <div\r\n          className='absolute right-0 transform rotate-90'\r\n          style={{\r\n            top: '15px',\r\n            borderWidth: '0 16px 16px 0',\r\n            borderColor:\r\n              'var(--color-primary) var(--sec-background) var(--color-primary) var(--sec-background)',\r\n            clipPath: 'polygon(0% 0%, 0% 100%, 100% 100%)',\r\n          }}\r\n        ></div>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\n/* https://developer.mozilla.org/en-US/docs/Web/CSS/Shorthand_properties */\r\n","import { useContext } from 'react';\r\n\r\nimport ThemeContext from '../ThemeContext';\r\n\r\nexport const useTheme = () => {\r\n  return useContext(ThemeContext);\r\n};\r\n","/* \r\nmaybe take in orientation for vertical ?\r\ntop and bottom? or does bottom border do top anyway if above the element\r\n*/\r\n\r\nexport function Divider() {\r\n  return <div className='border-b-2'></div>;\r\n}\r\n","import { Machine, assign } from 'xstate';\r\n\r\n/* owner -> playerId, side -> home/away, how to calculate for 10 cups/team games */\r\nexport function createInitialCups(owner, side) {\r\n  return [\r\n    {\r\n      side: side,\r\n      name: `${side}x6-y2`,\r\n      x: '6',\r\n      y: '2',\r\n      owner: `${owner}`,\r\n      hit: null,\r\n    },\r\n    {\r\n      side: side,\r\n      name: `${side}x4-y6`,\r\n      x: '4',\r\n      y: '6',\r\n      owner: `${owner}`,\r\n      hit: null,\r\n    },\r\n    {\r\n      side: side,\r\n      name: `${side}x8-y6`,\r\n      x: '8',\r\n      y: '6',\r\n      owner: `${owner}`,\r\n      hit: null,\r\n    },\r\n    {\r\n      side: side,\r\n      name: `${side}x2-y10`,\r\n      x: '2',\r\n      y: '10',\r\n      owner: `${owner}`,\r\n      hit: null,\r\n    },\r\n    {\r\n      side: side,\r\n      name: `${side}x6-y10`,\r\n      x: '6',\r\n      y: '10',\r\n      owner: `${owner}`,\r\n      hit: null,\r\n    },\r\n    {\r\n      side: side,\r\n      name: `${side}x10-y10`,\r\n      x: '10',\r\n      y: '10',\r\n      owner: `${owner}`,\r\n      hit: null,\r\n    },\r\n  ];\r\n}\r\n// hitcup = null || {timestamp: 'datetime', type: 'sink' || 'catch' || 'spill' || 'other'}\r\n\r\nexport const createMachineFromState = (state) => {\r\n  return Machine(\r\n    {\r\n      id: 'pong',\r\n      initial: 'playing',\r\n      context: {\r\n        ...state,\r\n      },\r\n      states: {\r\n        playing: {\r\n          /* always: [{ cond: 'checkWin', target: 'finish' }], */\r\n          on: {\r\n            PICKCUP: { actions: 'selectCup', target: 'modal' },\r\n            FORFEIT_HOME: { actions: 'commitSudoku', target: 'finish' },\r\n            FORFEIT_AWAY: { actions: 'commitSudoku', target: 'finish' },\r\n            RERACK: {\r\n              actions: ['storeHomeCups', 'storeAwayCups'],\r\n              target: 'rerack',\r\n            },\r\n          },\r\n        },\r\n        modal: {\r\n          on: {\r\n            SINK: {\r\n              actions: 'updateCups',\r\n              target: 'playing',\r\n            },\r\n            CATCH: {\r\n              actions: 'updateCups',\r\n              target: 'playing',\r\n              cond: 'checkLastCup',\r\n            },\r\n            SPILL: {\r\n              actions: 'updateCups',\r\n              target: 'playing',\r\n            },\r\n            OTHER: {\r\n              actions: 'updateCups',\r\n              target: 'playing',\r\n            },\r\n            RIM: {\r\n              actions: 'rimCup',\r\n              target: 'playing',\r\n            },\r\n            CANCEL: { actions: 'clearSelected', target: 'playing' },\r\n          },\r\n        },\r\n        rerack: {\r\n          on: {\r\n            CANCEL: {\r\n              actions: ['restoreCups', 'clearPreRack', 'clearSelected'],\r\n              target: 'playing',\r\n            },\r\n            SAVE: { actions: 'saveCups', target: 'playing' },\r\n          },\r\n          initial: 'idle',\r\n          states: {\r\n            idle: {\r\n              on: {\r\n                PICKCUP: {\r\n                  target: 'moving',\r\n                  actions: 'selectCup',\r\n                },\r\n              },\r\n            },\r\n            moving: {\r\n              on: {\r\n                MOUSEMOVE: {\r\n                  //target: \"hovering\",\r\n                  actions: assign({\r\n                    isHovering: true,\r\n                    lastHover: (ctx, evt) => {\r\n                      return { x: evt.position.x, y: evt.position.y };\r\n                    },\r\n                  }),\r\n                },\r\n                NEWPOS: {\r\n                  actions: assign({\r\n                    cupsNewPos: (ctx, evt) => {\r\n                      return { x: evt.position.x, y: evt.position.y };\r\n                    },\r\n                    // awayCups: //\r\n                    homeCups: (ctx, evt) => {\r\n                      /* we are clicking the  svg not the cup, \r\n                      \r\n                      there for get attribte for name is not getting the cup\r\n                      we should use the context for selected cup\r\n                      */\r\n                      if (ctx.selectedCup.side === 'home') {\r\n                        //get this cup\r\n                        const cupName = ctx.selectedCup.name;\r\n\r\n                        const restOfCups = ctx.homeCups.filter(\r\n                          (cup) => cup.name !== cupName\r\n                        );\r\n                        const newPosition = {\r\n                          ...ctx.selectedCup,\r\n                          x: evt.position.x + 2,\r\n                          y: evt.position.y + 2,\r\n                        };\r\n                        // calculate new position using evt.position.x/y\r\n                        return [...restOfCups, newPosition]; // ctx.homeCups\r\n                      } else {\r\n                        return ctx.homeCups;\r\n                      }\r\n                    },\r\n                    awayCups: (ctx, evt) => {\r\n                      if (ctx.selectedCup.side === 'away') {\r\n                        const cupName = ctx.selectedCup.name;\r\n                        const restOfCups = ctx.awayCups.filter(\r\n                          (cup) => cup.name !== cupName\r\n                        );\r\n                        const newPosition = {\r\n                          ...ctx.selectedCup,\r\n                          x: evt.position.x + 2,\r\n                          y: evt.position.y + 2,\r\n                        };\r\n                        // calculate new position using evt.position.x/y\r\n                        return [...restOfCups, newPosition];\r\n                      } else {\r\n                        return ctx.awayCups;\r\n                      }\r\n                    },\r\n                    selectedCup: () => null,\r\n                    lastHover: () => ({ x: null, y: null }),\r\n                  }),\r\n                  target: 'idle',\r\n                },\r\n                EXIT: {\r\n                  actions: assign({\r\n                    isHovering: () => false,\r\n                    lastHover: () => ({ x: null, y: null }),\r\n                  }),\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        finish: {\r\n          type: 'final',\r\n        },\r\n      },\r\n    },\r\n    {\r\n      actions: {\r\n        selectCup: assign({\r\n          selectedCup: (ctx, evt) => {\r\n            const cupName = evt.details.target.getAttribute('data-name');\r\n            const selCup = [...ctx.homeCups, ...ctx.awayCups].filter(\r\n              (cup) => cup.name === cupName\r\n            );\r\n            return selCup[0];\r\n          },\r\n        }),\r\n        updateCups: assign({\r\n          homeCups: handleHomeCups,\r\n          homeCupsLeft: handleHomeCupsLeft,\r\n          awayCups: handleAwayCups,\r\n          awayCupsLeft: handleAwayCupsLeft,\r\n          selectedCup: null,\r\n        }),\r\n        rimCup: assign({\r\n          homeCups: handleHomeCups,\r\n          homeCupRimCount: (ctx, evt) =>\r\n            ctx.selectedCup.side === 'home'\r\n              ? ctx.homeCupRimCount + 1\r\n              : ctx.homeCupRimCount,\r\n          awayCups: handleAwayCups,\r\n          awayCupRimCount: (ctx, evt) =>\r\n            ctx.selectedCup.side === 'away'\r\n              ? ctx.awayCupRimCount + 1\r\n              : ctx.awayCupRimCount,\r\n          selectedCup: null,\r\n        }),\r\n        clearSelected: assign({ selectedCup: null }),\r\n        commitSudoku: assign({\r\n          homeCups: handleHomeCupsForfeit,\r\n          homeCupsLeft: handleHomeCupsLeftForfeit,\r\n          awayCups: handleAwayCupsForfeit,\r\n          awayCupsLeft: handleAwayCupsLeftForfeit,\r\n          selectedCup: null,\r\n        }),\r\n\r\n        storeHomeCups: assign({\r\n          preRackHomeCups: (ctx, evt) => {\r\n            return ctx.homeCups;\r\n          },\r\n        }),\r\n        storeAwayCups: assign({\r\n          preRackAwayCups: (ctx, evt) => {\r\n            return ctx.awayCups;\r\n          },\r\n        }),\r\n        restoreCups: assign({\r\n          homeCups: (ctx) => ctx.preRackHomeCups,\r\n          awayCups: (ctx) => ctx.preRackAwayCups,\r\n        }),\r\n        clearPreRack: assign({\r\n          preRackHomeCups: () => null,\r\n          preRackAwayCups: () => null,\r\n        }),\r\n        saveCups: assign({\r\n          preRackHomeCups: () => null,\r\n          homeCupRerackComplete: (ctx) => {\r\n            if (ctx.homeCupRerackComplete) {\r\n              // if already true do not change as preRack may be a new location already\r\n              return true;\r\n            }\r\n            return ctx.homeCups === ctx.preRackHomeCups ? false : true;\r\n          },\r\n          preRackAwayCups: () => null,\r\n          awayCupRerackComplete: (ctx) => {\r\n            if (ctx.awayCupRerackComplete) {\r\n              return true;\r\n            }\r\n            return ctx.awayCups === ctx.preRackAwayCups ? false : true;\r\n          },\r\n        }),\r\n      },\r\n      guards: {\r\n        checkWin,\r\n        checkLastCup,\r\n        isHovering,\r\n        hoverMoved,\r\n        homeReracked,\r\n        awayReracked,\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\n/* instead of doing all actions \r\ni should use a cond and only run the right action? */\r\n\r\n// actions\r\n\r\nconst handleHomeCups = (ctx, evt) => {\r\n  if (ctx.selectedCup.side === 'home') {\r\n    const time = new Date().toISOString();\r\n    const newHome = ctx.homeCups.filter(\r\n      (cup) => cup.name !== ctx.selectedCup.name\r\n    );\r\n    if (evt.type === 'RIM') {\r\n      let rimCup;\r\n      if (ctx.selectedCup?.rim != null) {\r\n        rimCup = {\r\n          ...ctx.selectedCup,\r\n          rim: [...ctx.selectedCup?.rim, { timestamp: time, type: evt.type }],\r\n        };\r\n      } else {\r\n        rimCup = {\r\n          ...ctx.selectedCup,\r\n          rim: [{ timestamp: time, type: evt.type }],\r\n        };\r\n      }\r\n      return [...newHome, rimCup];\r\n    } else {\r\n      const hitCup = {\r\n        ...ctx.selectedCup,\r\n        hit: { timestamp: time, type: evt.type },\r\n      };\r\n      return [...newHome, hitCup];\r\n    }\r\n  } else {\r\n    return ctx.homeCups;\r\n  }\r\n};\r\n\r\nconst handleHomeCupsLeft = (ctx, evt) => {\r\n  if (ctx.selectedCup.side === 'home') {\r\n    return ctx.homeCupsLeft - 1;\r\n  } else {\r\n    return ctx.homeCupsLeft;\r\n  }\r\n};\r\n\r\nconst handleHomeCupsForfeit = (ctx, evt) => {\r\n  if (evt.type === 'FORFEIT_HOME') {\r\n    const time = new Date().toISOString();\r\n    /* change every cup that isnt hit to hit it now */\r\n    const alreadyHit = ctx.homeCups.filter((cup) => cup.hit !== null);\r\n    const hit = { hit: { timestamp: time, type: 'FORFEIT' } };\r\n    const forfeitCups = ctx.homeCups\r\n      .filter((cup) => cup.hit === null)\r\n      .map((cup) => ({ ...cup, ...hit }));\r\n    return [...alreadyHit, ...forfeitCups];\r\n  } else {\r\n    return ctx.homeCups;\r\n  }\r\n};\r\n\r\nconst handleHomeCupsLeftForfeit = (ctx, evt) => {\r\n  if (evt.type === 'FORFEIT_HOME') {\r\n    return 0;\r\n  } else {\r\n    return ctx.homeCupsLeft;\r\n  }\r\n};\r\n\r\nconst handleAwayCups = (ctx, evt) => {\r\n  if (ctx.selectedCup.side === 'away') {\r\n    const time = new Date().toISOString();\r\n    const newAway = ctx.awayCups.filter(\r\n      (cup) => cup.name !== ctx.selectedCup.name\r\n    );\r\n    if (evt.type === 'RIM') {\r\n      let rimCup;\r\n      if (ctx.selectedCup?.rim != null) {\r\n        rimCup = {\r\n          ...ctx.selectedCup,\r\n          rim: [...ctx.selectedCup?.rim, { timestamp: time, type: evt.type }],\r\n        };\r\n        //...ctx.selectedCup.rim,\r\n      } else {\r\n        rimCup = {\r\n          ...ctx.selectedCup,\r\n          rim: [{ timestamp: time, type: evt.type }],\r\n        };\r\n      }\r\n      return [...newAway, rimCup];\r\n    } else {\r\n      const hitCup = {\r\n        ...ctx.selectedCup,\r\n        hit: { timestamp: time, type: evt.type },\r\n      };\r\n      return [...newAway, hitCup];\r\n    }\r\n  } else {\r\n    return ctx.awayCups;\r\n  }\r\n};\r\n\r\nconst handleAwayCupsLeft = (ctx, evt) => {\r\n  if (ctx.selectedCup.side === 'away') {\r\n    return ctx.awayCupsLeft - 1;\r\n  } else {\r\n    return ctx.awayCupsLeft;\r\n  }\r\n};\r\n\r\nconst handleAwayCupsForfeit = (ctx, evt) => {\r\n  if (evt.type === 'FORFEIT_AWAY') {\r\n    const time = new Date().toISOString();\r\n    /* change every cup that isnt hit to hit it now */\r\n    const alreadyHit = ctx.awayCups.filter((cup) => cup.hit !== null);\r\n    const hit = { hit: { timestamp: time, type: 'FORFEIT' } };\r\n    const forfeitCups = ctx.awayCups\r\n      .filter((cup) => cup.hit === null)\r\n      .map((cup) => ({ ...cup, ...hit }));\r\n    return [...alreadyHit, ...forfeitCups];\r\n  } else {\r\n    return ctx.awayCups;\r\n  }\r\n};\r\n\r\nconst handleAwayCupsLeftForfeit = (ctx, evt) => {\r\n  if (evt.type === 'FORFEIT_AWAY') {\r\n    return 0;\r\n  } else {\r\n    return ctx.awayCupsLeft;\r\n  }\r\n};\r\n\r\n// guards\r\n\r\nconst checkLastCup = (context, event) => {\r\n  // cannot catch to knock last cup noCatchGuard\r\n  if (context.selectedCup.side === 'home') {\r\n    return context.homeCupsLeft > 1;\r\n  } else {\r\n    return context.awayCupsLeft > 1;\r\n  }\r\n};\r\n\r\nconst checkWin = (context, event) => {\r\n  if (context.homeCupsLeft === 0 || context.awayCupsLeft === 0) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nconst isHovering = (ctx) => ctx.isHovering;\r\n\r\nconst hoverMoved = (ctx, evt) => {\r\n  //console.log('hoverGuard', evt)\r\n  //last hover\r\n  const centreAdjustment = 1.5;\r\n  const clampedX = floorBound(evt.position.x - centreAdjustment, 0, 8);\r\n  const clampedY = floorBound(evt.position.y - centreAdjustment, 0, 8);\r\n  if (clampedX !== ctx.lastHover.x || clampedY !== ctx.lastHover.y) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nconst homeReracked = (ctx) => ctx.homeCupRerackComplete;\r\nconst awayReracked = (ctx) => ctx.awayCupRerackComplete;\r\n\r\n/* helpers*/\r\nfunction floorBound(num, lower, upper) {\r\n  /* get lower/upper from ctx? */\r\n  if (num > upper) {\r\n    return upper;\r\n  }\r\n  if (num < lower) {\r\n    return lower;\r\n  }\r\n  return Math.floor(num);\r\n}\r\n\r\n/* check if tournament game, if so then do not allow draw */\r\n\r\n/* \r\nundo function\r\nhttps://dev.to/robertbroersma/undo-redo-in-react-using-xstate-23j8 \r\nhttps://codesandbox.io/s/xstate-react-back-example-4q2vh\r\n*/\r\n\r\n/* \r\non click assign context the current\r\n\r\nwhen clicked look at context for current and update context to be hit\r\n*/\r\n","export async function fetchGameById(gameId) {\r\n  try {\r\n    const game = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/games/${gameId}`,\r\n      {\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const resp = await game.json();\r\n    return resp;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","export async function fetchGames() {\r\n  try {\r\n    const games = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/games/`,\r\n      {\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const resp = await games.json();\r\n    return resp;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","export async function fetchGamesByTournamentId(id) {\r\n  const player = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/games/tournament/${id}`\r\n  );\r\n  const resp = await player.json();\r\n  return resp;\r\n}\r\n","export async function fetchNews() {\r\n  const news = await fetch(`${process.env.REACT_APP_BACKEND_URL}/api/v1/news/`);\r\n  const resp = await news.json();\r\n  return resp;\r\n}\r\n","export async function fetchPlayerOverview(playerId) {\r\n  const overviewResp = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/overview/${playerId}`\r\n  );\r\n  const overview = await overviewResp.json();\r\n  return overview;\r\n}\r\n","export async function fetchPlayers() {\r\n  try {\r\n    const fetchPlayers = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/players`,\r\n      {\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const playersJson = await fetchPlayers.json();\r\n    return playersJson;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","export async function fetchPreferences() {\r\n  const player = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/preferences/`,\r\n    {\r\n      credentials: 'include',\r\n    }\r\n  );\r\n  const resp = await player.json();\r\n  return resp;\r\n}\r\n","export async function fetchRecords() {\r\n  try {\r\n    const records = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/records/`,\r\n      {\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const resp = await records.json();\r\n    return resp;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","export async function fetchTournamentById(id) {\r\n  const player = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/tournaments/${id}`\r\n  );\r\n  const resp = await player.json();\r\n  return resp;\r\n}\r\n","export async function fetchTournaments() {\r\n  try {\r\n    const tournaments = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/tournaments/`,\r\n      {\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const resp = await tournaments.json();\r\n    return resp;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","export async function fetchVenues() {\r\n  try {\r\n    const fetchVenues = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/venues`,\r\n      {\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const venuesJson = await fetchVenues.json();\r\n    return venuesJson;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","export async function postNewGame(data) {\r\n  const newGame = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/games/new`,\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  );\r\n  const newGameJson = await newGame.json();\r\n  return newGameJson;\r\n}\r\n","export async function postPreferences(newPreferences) {\r\n  const preferences = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/preferences/`,\r\n    {\r\n      method: 'POST',\r\n      body: JSON.stringify(newPreferences),\r\n      headers: {\r\n        'content-type': 'application/json',\r\n      },\r\n      credentials: 'include',\r\n    }\r\n  );\r\n  const resp = await preferences.json();\r\n  return resp;\r\n}\r\n","export async function postSaveGamePlay(data) {\r\n  const { id: gameId, ...rest } = data;\r\n  try {\r\n    const updateGame = await fetch(\r\n      `${process.env.REACT_APP_BACKEND_URL}/api/v1/games/${gameId}`,\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify(rest),\r\n        headers: {\r\n          'content-type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n      }\r\n    );\r\n    const resp = await updateGame.json();\r\n    return resp;\r\n  } catch (err) {\r\n    throw new Error(err);\r\n  }\r\n}\r\n","import { useRef } from 'react';\r\nimport { useMachine } from '@xstate/react';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\n\r\nimport { createMachineFromState } from '../tableMachine';\r\nimport { Button, buttonColor, Modal } from './index';\r\nimport { Cups } from './Cups';\r\nimport { postSaveGamePlay } from '../queries';\r\n\r\n//on start first throw - Math.random() < 0.5;\r\n// https://react-query.tanstack.com/guides/mutations\r\nexport function GamePlay({ gameDetails }) {\r\n  const queryClient = useQueryClient();\r\n  const gameMutate = useMutation(postSaveGamePlay, {\r\n    onError: (error) => {\r\n      // error toast\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['game', gameDetails.id]);\r\n      //save toast\r\n    },\r\n  });\r\n  const tableMachine = createMachineFromState(gameDetails.game_table);\r\n  const [state, send] = useMachine(tableMachine);\r\n  const centreAdjustment = 1.5;\r\n  const cupsRef = useRef(null);\r\n  const svgCoord = (evt) => {\r\n    if (cupsRef.current === null) {\r\n      return;\r\n    }\r\n    let point = cupsRef.current.createSVGPoint();\r\n    point.x = evt.clientX;\r\n    point.y = evt.clientY;\r\n    const cursorPoint = point.matrixTransform(\r\n      evt.target.getScreenCTM().inverse()\r\n    );\r\n    const clampedX = floorBound(cursorPoint.x - centreAdjustment, 0, 8);\r\n    const clampedY = floorBound(cursorPoint.y - centreAdjustment, 0, 8);\r\n    return send({\r\n      type: 'NEWPOS',\r\n      position: { x: clampedX, y: clampedY },\r\n      details: evt,\r\n    });\r\n  };\r\n\r\n  const newMove = (evt) => {\r\n    if (cupsRef.current === null) {\r\n      return;\r\n    }\r\n    let point = cupsRef.current.createSVGPoint();\r\n    point.x = evt.clientX;\r\n    point.y = evt.clientY;\r\n    const cursorPoint = point.matrixTransform(\r\n      evt.target.getScreenCTM().inverse()\r\n    );\r\n    const clampedX = floorBound(cursorPoint.x - centreAdjustment, 0, 8);\r\n    const clampedY = floorBound(cursorPoint.y - centreAdjustment, 0, 8);\r\n    return send({\r\n      type: 'MOUSEMOVE',\r\n      position: { x: clampedX, y: clampedY },\r\n      details: evt,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    //check form valid, skipping for prototype\r\n    const toStringify = JSON.stringify(state.context);\r\n    let data = {\r\n      //...gameDetails,\r\n      id: gameDetails.id,\r\n      player1: gameDetails.player1,\r\n      player2: gameDetails.player2,\r\n      homeCupsLeft: state.context.homeCupsLeft,\r\n      awayCupsLeft: state.context.awayCupsLeft,\r\n      forfeit: state.context.forfeit,\r\n      table: toStringify,\r\n    };\r\n    gameMutate.mutate(data);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        {state.matches('rerack') ? (\r\n          <>\r\n            <Button text='Save' onClick={() => send('SAVE')} fullWidth />\r\n            <Button text='Cancel' onClick={() => send('CANCEL')} fullWidth />\r\n          </>\r\n        ) : (\r\n          <Button text='Rerack' onClick={() => send('RERACK')} fullWidth />\r\n        )}\r\n      </div>\r\n      <div>\r\n        <div>{gameDetails.home_name}</div>\r\n        <div>home cups left: {state.context.homeCupsLeft}</div>\r\n        <div>hit rim: {state.context.awayCupRimCount}</div>\r\n        <div>\r\n          reracked:\r\n          {JSON.stringify(state.context.homeCupRerackComplete)}\r\n        </div>\r\n        <Cups\r\n          side='home'\r\n          cups={state.context.homeCups}\r\n          gameSize={6}\r\n          forwardRef={cupsRef}\r\n          mouseExit={() => send('EXIT')}\r\n          pickCup={(evt) => send({ type: 'PICKCUP', details: evt })}\r\n          newMove={newMove}\r\n          svgCoord={svgCoord}\r\n          rerack={state.matches('rerack')}\r\n          movingState={state.matches('rerack.moving')}\r\n          lastHover={state.context.lastHover}\r\n          selectedCup={state.context.selectedCup}\r\n        />\r\n        {state.matches('playing') && (\r\n          <div className='pb-4'>\r\n            <Button\r\n              text='Home forfeit?'\r\n              onClick={(_, evt) => send('FORFEIT_HOME')}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <div>{gameDetails.away_name}</div>\r\n        <div>away cups left: {state.context.awayCupsLeft}</div>\r\n        <div>hit rim: {state.context.homeCupRimCount}</div>\r\n        <div>\r\n          reracked: {JSON.stringify(state.context.awayCupRerackComplete)}\r\n        </div>\r\n        <Cups\r\n          side='away'\r\n          cups={state.context.awayCups}\r\n          gameSize={6}\r\n          forwardRef={cupsRef}\r\n          mouseExit={() => send('EXIT')}\r\n          pickCup={(evt) => send({ type: 'PICKCUP', details: evt })}\r\n          newMove={newMove}\r\n          svgCoord={svgCoord}\r\n          rerack={state.matches('rerack')}\r\n          movingState={state.matches('rerack.moving')}\r\n          lastHover={state.context.lastHover}\r\n          selectedCup={state.context.selectedCup}\r\n        />\r\n        {state.matches('playing') && (\r\n          <div className='pb-4'>\r\n            <Button\r\n              text='Away forfeit?'\r\n              onClick={(_, evt) => send('FORFEIT_AWAY')}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <Button text='Submit' onClick={handleSubmit} />\r\n      </div>\r\n\r\n      <Modal\r\n        isOpen={state.matches('modal')}\r\n        dismiss={() => send('CANCEL')}\r\n        title='Cup details'\r\n      >\r\n        <div className='p-2 flex flex-col space-y-8'>\r\n          <Button\r\n            name='sink'\r\n            text='Sink'\r\n            onClick={() => send('SINK')}\r\n            color={buttonColor.outlined}\r\n          />\r\n          <Button\r\n            name='catch'\r\n            text='Catch'\r\n            onClick={() => send('CATCH')}\r\n            color={buttonColor.outlined}\r\n          />\r\n          <Button\r\n            name='spill'\r\n            text='Spill'\r\n            onClick={() => send('SPILL')}\r\n            color={buttonColor.outlined}\r\n          />\r\n          <Button\r\n            name='other'\r\n            text='Other'\r\n            onClick={() => send('OTHER')}\r\n            color={buttonColor.outlined}\r\n          />\r\n          <Button\r\n            name='rim'\r\n            text='Rim'\r\n            onClick={() => send('RIM')}\r\n            color={buttonColor.outlined}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction floorBound(num, lower, upper) {\r\n  if (num > upper) {\r\n    return upper;\r\n  }\r\n  if (num < lower) {\r\n    return lower;\r\n  }\r\n  return Math.floor(num);\r\n}\r\n","/* if locked or view only people should see GameView instead of GamePlay */\r\nimport { CupsView } from './CupsView';\r\n\r\nexport function GameView({ gameDetails }) {\r\n  return (\r\n    <>\r\n      <div>\r\n        <div>{gameDetails.home_name}</div>\r\n        <div>home cups left: {gameDetails.home_cups_left}</div>\r\n        <div>hit rim: {gameDetails.game_table.awayCupRimCount}</div>\r\n        <div>\r\n          reracked:\r\n          {JSON.stringify(gameDetails.game_table.homeCupRerackComplete)}\r\n        </div>\r\n        <CupsView\r\n          side='home'\r\n          cups={gameDetails.game_table.homeCups}\r\n          gameSize={6}\r\n        />\r\n      </div>\r\n      <div>\r\n        <div>{gameDetails.away_name}</div>\r\n        <div>away cups left: {gameDetails.away_cups_left}</div>\r\n        <div>hit rim: {gameDetails.game_table.homeCupRimCount}</div>\r\n        <div>\r\n          reracked:\r\n          {JSON.stringify(gameDetails.game_table.awayCupRerackComplete)}\r\n        </div>\r\n        <CupsView\r\n          side='away'\r\n          cups={gameDetails.game_table.awayCups}\r\n          gameSize={6}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { useWindowSize } from '../hooks/useWindowSize';\r\nimport { Divider } from './Divider';\r\n\r\n/* uld like to break nav down for mobile view \r\n  have bottom nav similar to Youtube mobile\r\n  keep logo/search/profile icon in the header\r\n*/\r\nexport function Nav() {\r\n  let size = useWindowSize();\r\n\r\n  if (size.width > 640) {\r\n    return (\r\n      <div className='w-96'>\r\n        <nav className='text-center font-mono'>\r\n          <ul className='flex flex-row'>\r\n            <li className='w-full'>\r\n              <StyledNavLink to={'/'} exact text='Home' />\r\n            </li>\r\n            <li className='w-full'>\r\n              <StyledNavLink to={'/games'} text='Games' />\r\n            </li>\r\n            <li className='w-full'>\r\n              <StyledNavLink to={'/versus'} text='Versus' />\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className='fixed bottom-0 w-full bg-primary-background z-10'>\r\n      <Divider />\r\n      <nav className='text-center py-4 font-mono flex justify-center items-center'>\r\n        <ul className='flex flex-row justify-between w-full'>\r\n          <li className='w-full'>\r\n            <StyledNavLink to={'/'} exact text='Home' />\r\n          </li>\r\n          <li className='w-full'>\r\n            <StyledNavLink to={'/games'} text='Games' />\r\n          </li>\r\n          <li className='w-full'>\r\n            <StyledNavLink to={'/versus'} text='Versus' />\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst StyledNavLink = ({ to, text, exact = false }) => {\r\n  return (\r\n    <NavLink\r\n      to={to}\r\n      exact={exact}\r\n      activeClassName='text-primary border-b-4 border-solid border-primary'\r\n      className='p-2 font-bold text-xl uppercase inline-block w-full hover:text-primary border-b-4 border-opacity-0'\r\n    >\r\n      {text}\r\n    </NavLink>\r\n  );\r\n};\r\n","import { useState, useEffect } from 'react';\r\n\r\n// currently only using for width - can expand if needed\r\n\r\nexport function useWindowSize() {\r\n  // Initialize state with undefined width/height so server and client renders match\r\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\r\n\r\n  /* using cra so never on server, initialising with window size prevents the flicker */\r\n  const [windowSize, setWindowSize] = useState({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Handler to call on window resize\r\n    function handleResize() {\r\n      // Set window width/height to state\r\n      setWindowSize({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    }\r\n\r\n    // Add event listener\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    // Call handler right away so state gets updated with initial window size\r\n    handleResize();\r\n\r\n    // Remove event listener on cleanup\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount\r\n\r\n  return windowSize;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/beer-pong.1d7e56cf.svg\";","import { Link } from 'react-router-dom';\r\n\r\nimport logo from '../assets/beer-pong.svg';\r\n\r\nexport function Logo() {\r\n  return (\r\n    <div className='px-4'>\r\n      <Link to='/'>\r\n        <img src={logo} alt='logo with link home' className='w-16' />\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { NavLink, useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport { useAuth } from '../hooks/useAuth';\r\n\r\n/* i think i prefer github version of opening up a drawer to cover the entire right side. currently bit janky when removes scroll bar */\r\n\r\nexport function Menu() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const toggleMenu = () => setIsOpen(!isOpen);\r\n  const closeMenu = () => setIsOpen(false);\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const auth = useAuth();\r\n\r\n  const handleSignOut = () => {\r\n    auth.signOut();\r\n    closeMenu();\r\n    history.push(location.pathname);\r\n    // if its a protected route redirect should activate anyway\r\n    //send toast?\r\n  };\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n    return () => (document.body.style.overflow = '');\r\n  }, [isOpen]);\r\n  return (\r\n    <div>\r\n      <button\r\n        className={`\r\n      h-16\r\n      w-16\r\n      rounded-full\r\n      border\r\n      focus:outline-none\r\n      mr-4\r\n      z-20\r\n      relative\r\n      bg-primary-background`}\r\n        onClick={toggleMenu}\r\n      >\r\n        {auth.user ? <span>T</span> : <span>F</span>}\r\n      </button>\r\n      {isOpen && (\r\n        <>\r\n          <button\r\n            className='bg-gray-500 opacity-75 cursor-default fixed top-0 left-0 right-0 bottom-0 h-full w-full z-10 outline-none'\r\n            tabIndex='-1'\r\n            onClick={closeMenu}\r\n          />\r\n          <div\r\n            className={`\r\n              absolute\r\n              right-0\r\n              w-72\r\n              my-1\r\n              z-20\r\n              border\r\n              bg-primary-background`}\r\n          >\r\n            <ul>\r\n              <MenuItem>\r\n                <NavLink to='/settings' className=' inline-block p-2 w-full'>\r\n                  Preferences\r\n                </NavLink>\r\n              </MenuItem>\r\n              <MenuSpacer />\r\n              {auth.user ? (\r\n                <MenuItem>\r\n                  <button\r\n                    className='font-semibold w-full p-2 text-left'\r\n                    onClick={handleSignOut}\r\n                  >\r\n                    Sign out\r\n                  </button>\r\n                </MenuItem>\r\n              ) : (\r\n                <MenuItem>\r\n                  <NavLink className='w-full inline-block p-2' to='/signin'>\r\n                    Sign in\r\n                  </NavLink>\r\n                </MenuItem>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MenuItem({ children }) {\r\n  return (\r\n    <li className='hover:bg-sec-background cursor-pointer hover:text-primary font-semibold'>\r\n      {children}\r\n    </li>\r\n  );\r\n}\r\nfunction MenuSpacer() {\r\n  return <li className='border-b-4'></li>;\r\n}\r\n","/*\r\ninput should have\r\nlabel\r\ninput\r\nerror msg\r\n*/\r\n/* spreading extra input props allows optional use of aria properties*/\r\nexport function Input({\r\n  name,\r\n  type = 'text',\r\n  label = '',\r\n  placeholder = '',\r\n  required = false,\r\n  value,\r\n  onChange,\r\n  helpText = '',\r\n  errorMsg = '',\r\n  ...inputProps\r\n}) {\r\n  return (\r\n    <div className='flex flex-col mb-2'>\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n        name={name}\r\n        className={`\r\n        w-full block\r\n        appearance-none\r\n        bg-input-background\r\n        border\r\n        border-gray-200\r\n        text-gray-700\r\n        py-3\r\n        px-4\r\n        pr-8\r\n        rounded\r\n        leading-tight\r\n        focus:outline-none\r\n        focus:bg-white\r\n        focus:border-gray-500`}\r\n        value={value}\r\n        onChange={onChange}\r\n        required={required}\r\n        type={type}\r\n        placeholder={placeholder}\r\n        {...inputProps}\r\n      />\r\n      {helpText.length > 0 ? (\r\n        <small id={name + 'Help'}>{helpText}</small>\r\n      ) : null}\r\n      {errorMsg.length > 0 && <p className='text-negative'>{errorMsg}</p>}\r\n    </div>\r\n  );\r\n}\r\n","/* should be a page to edit these terms, should probably be stored in db? or do we want to do without db request */\r\nexport const searchPages = [\r\n  {\r\n    matches: ['tournaments', 'events', 'fixtures'],\r\n    link: '/tournaments',\r\n    text: 'Tournaments!',\r\n    description: '',\r\n  },\r\n  {\r\n    matches: ['players', 'fixtures'],\r\n    link: '/players',\r\n    text: 'Players!',\r\n    description: '',\r\n  },\r\n  {\r\n    matches: ['tournaments', 'events', 'fixtures', 'games', 'new', 'new game'],\r\n    link: '/games',\r\n    text: 'Games!',\r\n    description: '',\r\n  },\r\n  {\r\n    matches: ['stats', 'compare', 'versus', 'vs', 'comparison'],\r\n    link: '/versus',\r\n    text: 'Versus!',\r\n    description: '',\r\n  }, //vs less than 3 chars?\r\n  {\r\n    matches: [\r\n      'stats',\r\n      'records',\r\n      'most',\r\n      'wins',\r\n      'gold',\r\n      'silver',\r\n      'bronze',\r\n      'losses',\r\n      'least',\r\n    ],\r\n    link: '/records',\r\n    text: 'Records!',\r\n    description: '',\r\n  },\r\n  {\r\n    matches: ['settings', 'preferences', 'theme', 'colours', 'colors'],\r\n    link: '/settings',\r\n    text: 'Settings!',\r\n    description: '',\r\n  },\r\n  {\r\n    matches: ['test'],\r\n    link: '/test',\r\n    text: 'Test!',\r\n    description: '',\r\n  },\r\n];\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Input } from './Input';\r\nimport { searchPages } from '../searchPages';\r\n\r\n/* bbc search bar spans full screen in a new area */\r\nexport function Search() {\r\n  const [inputFocus, setInputFocus] = useState(false);\r\n  const [searchText, setSearchText] = useState('');\r\n  const handleInputFocus = (evt) => {\r\n    if (!inputFocus) {\r\n      return setInputFocus(true);\r\n    }\r\n  };\r\n  const handleInputBlur = (evt) => {\r\n    if (!evt.relatedTarget) {\r\n      setInputFocus(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (evt) => setSearchText(evt.target.value);\r\n\r\n  const search = (items) => {\r\n    return items.filter((page) => {\r\n      const cleanText = searchText.trim().toLowerCase();\r\n      const joined = page.matches.join(' ');\r\n      // page.matches.find( match => match.indexOf(cleanText) > 1)\r\n      return joined.indexOf(cleanText) > -1;\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <div className='flex flex-col relative max-w-md flex-grow mx-4'>\r\n        <Input\r\n          placeholder='Search site...'\r\n          type='search'\r\n          value={searchText}\r\n          onChange={handleChange}\r\n          onFocus={handleInputFocus}\r\n          onBlur={handleInputBlur}\r\n        />\r\n        {inputFocus && searchText.length > 0 && (\r\n          <Suggestions items={search(searchPages)} />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Suggestions({ items }) {\r\n  const [current, setCurrent] = useState(null);\r\n  const handleHover = (evt) => {\r\n    /* get index of the item with the link property */\r\n    const itemIndex = items\r\n      .map((props) => props.link)\r\n      .indexOf(evt.target.getAttribute('data-path'));\r\n    setCurrent(itemIndex);\r\n  };\r\n  useEffect(() => {\r\n    const keyPressHandler = (evt) => {\r\n      if (evt.key === 'ArrowDown') {\r\n        evt.preventDefault();\r\n        if (current === null) {\r\n          setCurrent(0);\r\n        } else {\r\n          setCurrent(current >= items.length - 1 ? 0 : current + 1);\r\n        }\r\n      }\r\n      if (evt.key === 'ArrowUp') {\r\n        evt.preventDefault();\r\n        if (current === null) {\r\n          setCurrent(0);\r\n        } else {\r\n          setCurrent(current === 0 ? items.length - 1 : current - 1);\r\n        }\r\n      }\r\n    };\r\n    document.addEventListener('keydown', keyPressHandler);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', keyPressHandler);\r\n    };\r\n  }, [current, items]);\r\n\r\n  return (\r\n    <div className='absolute shadow list-none bg-primary-background w-full top-full px-2 pt-2 z-10'>\r\n      <h3 className='font-semibold text-center text-sm border-b pb-2'>\r\n        Search for pages on this site\r\n      </h3>\r\n      <ul className='list-none'>\r\n        {items?.length > 0 &&\r\n          items.map((page, idx) => {\r\n            return (\r\n              <SearchItem\r\n                key={`${page.matches.join('-')}${idx}`}\r\n                item={page}\r\n                handleHover={handleHover}\r\n                active={current === idx}\r\n              />\r\n            );\r\n          })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SearchItem({ item, active, handleHover }) {\r\n  /* using ref to focus link, now we can click enter to open the focused link */\r\n  const itemFocus = useRef(null);\r\n  /*   useEffect(() => {\r\n    if (itemFocus.current === null) return;\r\n    itemFocus.current.focus();\r\n  }, [active]); */\r\n  return (\r\n    <li>\r\n      <Link\r\n        onMouseOver={handleHover}\r\n        className={`inline-block w-full h-full p-4 ${\r\n          active && 'bg-sec-background'\r\n        }`}\r\n        to={`${item.link}`}\r\n        data-path={item.link}\r\n        ref={itemFocus}\r\n      >\r\n        {item.text}\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n","import { Nav } from './Nav';\r\nimport { Logo } from './Logo';\r\nimport { Menu } from './Menu';\r\nimport { Search } from './Search';\r\n\r\nexport function Header() {\r\n  return (\r\n    <header className='flex items-center justify-between h-20 py-3 shadow'>\r\n      <Logo />\r\n      <Nav />\r\n      <Search />\r\n      <Menu />\r\n    </header>\r\n  );\r\n}\r\n","/* support different types of number inputs */\r\n/* to use browser min/max or JOI validation? */\r\nexport function InputNumber({\r\n  name,\r\n  min = 0,\r\n  max = 6,\r\n  label = '',\r\n  onChange,\r\n  value,\r\n  required = false,\r\n  helpText = '',\r\n  errorMsg = '',\r\n}) {\r\n  return (\r\n    <div className='flex flex-col mb-2'>\r\n      <label htmlFor={name}>{label}</label>\r\n      <input\r\n        name={name}\r\n        className={`\r\n        w-full block\r\n        appearance-none\r\n        bg-input-background\r\n        border\r\n        border-gray-200\r\n        text-gray-700\r\n        py-3\r\n        px-4\r\n        pr-8\r\n        rounded\r\n        leading-tight\r\n        focus:outline-none\r\n        focus:bg-white\r\n        focus:border-gray-500\r\n        `}\r\n        value={value}\r\n        onChange={onChange}\r\n        min={min}\r\n        max={max}\r\n        required={required}\r\n        type='number'\r\n      />\r\n      {helpText.length > 0 ? (\r\n        <small id={name + 'Help'}>{helpText}</small>\r\n      ) : null}\r\n      {errorMsg.length > 0 && <p className='text-negative'>{errorMsg}</p>}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nimport { useAuth } from '../hooks/useAuth';\r\n\r\nexport function LoggedOutRoute({ children, updatePageTitle, ...rest }) {\r\n  const { user } = useAuth();\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() => {\r\n        if (user) {\r\n          //already logged in\r\n          return <Redirect to='/' />;\r\n        } else {\r\n          return children;\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import { Link } from 'react-router-dom';\r\n\r\nexport function Match({ details }) {\r\n  const isWinner = (cupsLeft) => {\r\n    return cupsLeft === 0 ? true : false;\r\n  };\r\n  return (\r\n    <div className='shadow px-4 pb-4 space-y-2'>\r\n      <div className='flex justify-between text-xs font-semibold'>\r\n        <div>{details.venue}</div>\r\n        <div>{details.tournament_ID ? details.stage : 'friendly'} </div>\r\n      </div>\r\n      <div className='text-center'>\r\n        <div className='font-bold'>{details.event}</div>\r\n        <div className='text-xs'>\r\n          {details.date && formatDateString(details.date)}\r\n        </div>\r\n      </div>\r\n      <div className='grid grid-cols-2 text-center'>\r\n        <div>\r\n          <Link\r\n            className={`text-link-text underline relative ${\r\n              isWinner(details.away_cups_left) && 'psudo-winner'\r\n            }`}\r\n            to={`/player/${details.home_ID}`}\r\n          >\r\n            {details.home_name}\r\n          </Link>\r\n          <div>{details.home_cups_left}</div>\r\n        </div>\r\n        <div>\r\n          <Link\r\n            className={`text-link-text underline relative ${\r\n              isWinner(details.home_cups_left) && 'psudo-winner'\r\n            }`}\r\n            to={`/player/${details.away_ID}`}\r\n          >\r\n            {details.away_name}\r\n          </Link>\r\n          <div>{details.away_cups_left}</div>\r\n        </div>\r\n      </div>\r\n      <div className='text-right'>\r\n        <Link className='text-link-text underline' to={`/games/${details.id}`}>\r\n          details...\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst formatDateString = (dateString) => {\r\n  let justDateString = dateString.split('T')[0].split('-').reverse().join('-');\r\n  return justDateString;\r\n};\r\n","import { Match } from './Match';\r\n\r\n//just a wrapper around Matches for now\r\nexport function MatchGrid({ games }) {\r\n  return (\r\n    <div className='grid md:grid-cols-3 gap-4'>\r\n      {games.map((game) => {\r\n        return <Match key={game.id} details={game} />;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\n\r\n//investigate focus trapping ?\r\nexport function Modal({ isOpen = false, dismiss = () => {}, title, children }) {\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n    return () => (document.body.style.overflow = '');\r\n  }, [isOpen]);\r\n  if (isOpen) {\r\n    return (\r\n      <div className='fixed z-20 inset-0'>\r\n        <div className='flex items-center justify-center min-h-screen pt-4 px-4 text-center'>\r\n          <div className='fixed inset-0 transition-opacity'>\r\n            <div className='absolute inset-0 bg-gray-500 opacity-75'></div>\r\n          </div>\r\n          <div\r\n            className='inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full z-20 w-3/4'\r\n            role='dialog'\r\n            aria-modal='true'\r\n            aria-labelledby='modal-headline'\r\n          >\r\n            <div className='flex justify-between'>\r\n              <h3 className='text-lg p-4' id='modal-headline'>\r\n                {title}\r\n              </h3>\r\n              <button onClick={dismiss} className='cursor-pointer px-2 text-lg'>\r\n                ×\r\n              </button>\r\n            </div>\r\n            <div>{children}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n","/* \r\n  pinned news, anything with > 0 priority?\r\n*/\r\n\r\nexport function PinnedNews() {\r\n  return <div className=''></div>;\r\n}\r\n","import { useState, useEffect, useRef } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { useQuery } from 'react-query';\r\nimport gfm from 'remark-gfm';\r\n\r\n/* news & pinned news, events? */\r\nimport { PinnedNews } from './PinnedNews';\r\nimport { fetchNews } from '../queries';\r\n\r\nconst maxHeight = {\r\n  small: { size: '10rem', class: 'max-h-40', value: 160 },\r\n  medium: { size: '16rem', class: 'max-h-64', value: 256 },\r\n  large: { size: '20rem', class: 'max-h-80', value: 320 },\r\n  xlarge: { size: '24rem', class: 'max-h-96', value: 384 },\r\n};\r\n\r\nexport function News() {\r\n  const { isLoading, error, data } = useQuery('news', fetchNews);\r\n  if (error) {\r\n    return (\r\n      <>\r\n        <span>Error loading news...</span>\r\n      </>\r\n    );\r\n  }\r\n  if (isLoading) {\r\n    return (\r\n      <>\r\n        <span>Loading news...</span>\r\n      </>\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <PinnedNews />\r\n      {data.map((article) => {\r\n        return (\r\n          <ClipNews\r\n            key={article.id}\r\n            content={article.content}\r\n            size={maxHeight.large}\r\n          />\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n/* create an extension panel? or link to news page */\r\n\r\nfunction ClipNews({ size = maxHeight.large, content }) {\r\n  const clipRef = useRef(null);\r\n  // if content is bigger than size then overflow hidden and button to expand\r\n  const [showExpand, setShowExpand] = useState(false);\r\n  const [expand, setExpand] = useState(false);\r\n  const toggleExpand = () => setExpand(!expand);\r\n  useEffect(() => {\r\n    if (clipRef.current === null) return;\r\n    const refHeight = clipRef.current.getBoundingClientRect().height;\r\n    if (refHeight >= size.value) {\r\n      setShowExpand(true);\r\n    }\r\n  }, [size.value]);\r\n  return (\r\n    <>\r\n      <section\r\n        ref={clipRef}\r\n        className={`prose lg:prose-xl \r\n        overflow-hidden\r\n        transition-all\r\n        duration-700\r\n        ${size.class}\r\n        ${expand && 'max-h-full'}\r\n        ${showExpand && !expand && 'mask-bottom-transparent'}\r\n        ${!showExpand && 'border-b'}\r\n        `}\r\n      >\r\n        <ReactMarkdown remarkPlugins={[gfm]}>{content}</ReactMarkdown>\r\n      </section>\r\n      {showExpand ? (\r\n        <div\r\n          className='text-center text-link-text underline border-b mb-4 pb-2'\r\n          onClick={toggleExpand}\r\n        >\r\n          {!expand ? 'Read more 🔽' : 'Read less 🔼'}\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\n// array of player details\r\nexport function PlayerOverview({ details }) {\r\n  const headers = [\r\n    'Name',\r\n    'Games played',\r\n    'Forfeits',\r\n    'Total Wins',\r\n    'Win %',\r\n    'Reached quarters',\r\n    'Reached semis',\r\n    'Reached final',\r\n    'Tournament Wins',\r\n  ];\r\n  let showHeaders;\r\n  if (details.length > 0) {\r\n    showHeaders = true;\r\n  } else {\r\n    showHeaders = false;\r\n  }\r\n  return (\r\n    <div className='flex flex-row items-center '>\r\n      <ColumnHeader labels={headers} show={showHeaders} />\r\n      {details.map((player, idx) => {\r\n        // check if idx is last in details\r\n        const last = details.length - 1;\r\n        if (player == null) return null;\r\n        return (\r\n          <ColumnPlayer\r\n            playerData={player}\r\n            last={idx === last}\r\n            key={`${player?.name}${idx}`}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ColumnHeader({ labels, show }) {\r\n  if (!show) return <div className='w-1/2 border border-secondary'></div>;\r\n  return (\r\n    <div className='w-1/2 border-secondary table-start'>\r\n      {labels.map((label) => (\r\n        <Cell key={label} header={true}>\r\n          {label}\r\n        </Cell>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ColumnPlayer({ last = true, playerData }) {\r\n  return (\r\n    <div\r\n      className={`text-right w-1/4 border-secondary ${last ? 'table-end' : ''}`}\r\n    >\r\n      <Cell>{playerData.name ? playerData.name : ''}</Cell>\r\n      <Cell>{playerData.games ? playerData.games : '0'}</Cell>\r\n      <Cell>{playerData.forfeits ? playerData.forfeits : '0'}</Cell>\r\n      <Cell>\r\n        {playerData.homeWins && playerData.awayWins\r\n          ? Number(playerData.homeWins) + Number(playerData.awayWins)\r\n          : '0'}\r\n      </Cell>\r\n      <Cell>\r\n        {playerData.homeWins && playerData.awayWins && playerData.games\r\n          ? (\r\n              ((Number(playerData.homeWins) + Number(playerData.awayWins)) /\r\n                Number(playerData.games)) *\r\n              100\r\n            ).toFixed(2) + '%'\r\n          : '0'}\r\n      </Cell>\r\n      <Cell>{playerData.quarterFinals ? playerData.quarterFinals : '0'}</Cell>\r\n      <Cell>{playerData.semiFinals ? playerData.semiFinals : '0'}</Cell>\r\n      <Cell>{playerData.finals ? playerData.finals : '0'}</Cell>\r\n      <Cell>{playerData.finalsWon ? playerData.finalsWon : '0'}</Cell>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Cell({ header = false, children }) {\r\n  return (\r\n    <div\r\n      className={`${\r\n        header ? 'header' : ''\r\n      } border-secondary table-like-border py-2 px-4`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Button } from './Button';\r\nimport { Modal } from './Modal';\r\n\r\nexport function PlayerPicker({\r\n  name,\r\n  playerNames = [],\r\n  selected,\r\n  selectPlayer = () => {},\r\n  variant = 'square',\r\n  color = 'primary',\r\n  fullWidth = false,\r\n  disabled = false,\r\n}) {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [searchText, setSearchText] = useState('');\r\n  const toggleModal = (evt) => {\r\n    setShowModal(!showModal);\r\n  };\r\n  const handleSearchInput = (evt) => setSearchText(evt.target.value);\r\n  const search = (items) =>\r\n    items.filter(\r\n      (item) =>\r\n        item.name.toLowerCase().indexOf(searchText.toLowerCase()) > -1 ||\r\n        item.id.toString().indexOf(searchText) > -1\r\n    );\r\n\r\n  //should i look at useCallback instead of the extending selectPlayer on li onclick\r\n  return (\r\n    <>\r\n      <Button\r\n        variant={variant}\r\n        color={color}\r\n        handleClick={toggleModal}\r\n        text={\r\n          selected !== ''\r\n            ? playerNames[selected - 1].name\r\n            : 'Click to pick player'\r\n        }\r\n        fullWidth={fullWidth}\r\n        disabled={disabled}\r\n      />\r\n\r\n      <Modal isOpen={showModal} dismiss={toggleModal} title='Add Player'>\r\n        <div className='px-2'>\r\n          <div className='text-center'>\r\n            <form role='search'>\r\n              <input\r\n                placeholder='Filter names'\r\n                className='p-2 shadow mb-2'\r\n                onChange={handleSearchInput}\r\n                value={searchText}\r\n              />\r\n            </form>\r\n          </div>\r\n          <div className='max-h-75vh flex'>\r\n            <ul role='listbox' className='overflow-y-auto w-full'>\r\n              {search(playerNames).map((player) => (\r\n                <li\r\n                  key={player.id}\r\n                  value={player.id}\r\n                  role='option'\r\n                  className='flex justify-between px-6 py-2 border-b cursor-pointer hover:bg-gray-200'\r\n                  onClick={() => {\r\n                    selectPlayer(name, `${player.id}`);\r\n                    toggleModal();\r\n                  }}\r\n                  aria-selected={false}\r\n                >\r\n                  <span className='select-none'>+</span>\r\n                  <span>{player.name}</span>\r\n                  <span className='text-gray-700'>{player.id}</span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n","import { useIsFetching } from 'react-query';\r\n\r\n// Loader\r\n\r\nexport function Refreshing() {\r\n  const isFetching = useIsFetching();\r\n  if (!isFetching) {\r\n    return null;\r\n  }\r\n  return (\r\n    <svg\r\n      className='w-6 h-6 animate-spin absolute text-positive right-0'\r\n      fill='none'\r\n      stroke='currentColor'\r\n      viewBox='0 0 24 24'\r\n      xmlns='http://www.w3.org/2000/svg'\r\n    >\r\n      <path\r\n        strokeLinecap='round'\r\n        strokeLinejoin='round'\r\n        strokeWidth='2'\r\n        d='M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15'\r\n      ></path>\r\n    </svg>\r\n  );\r\n}\r\n","export function Select({\r\n  name,\r\n  placeholder = 'Select option',\r\n  onChange = () => {},\r\n  children,\r\n  ...rest\r\n}) {\r\n  return (\r\n    <select\r\n      name={name}\r\n      // appearance-none\r\n      className={`\r\n      w-full\r\n      block\r\n      bg-input-background\r\n      border\r\n      border-gray-200\r\n      text-gray-700\r\n      py-3\r\n      px-4\r\n      pr-8\r\n      rounded\r\n      leading-tight\r\n      focus:outline-none\r\n      focus:bg-white\r\n      focus:border-gray-500\r\n      `}\r\n      onChange={onChange}\r\n      {...rest}\r\n    >\r\n      <option value=''>{placeholder}</option>\r\n      {children}\r\n    </select>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\n\r\n//helper component to see all my theme options on any page\r\nexport function Swatch() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const toggleOpen = () => setIsOpen(!isOpen);\r\n\r\n  return (\r\n    <div className='bg-white w-1/2 p-2 mx-4 text-center bottom-0 float-right sticky rounded-t-lg'>\r\n      <button onClick={toggleOpen} className='w-full h-full'>\r\n        {isOpen ? 'Hide swatch' : 'Show swatch'}\r\n      </button>\r\n      {isOpen ? (\r\n        <div className='uppercase'>\r\n          <div className='border-2 border-black overflow-x-hidden'>\r\n            <div className='bg-primary p-2 truncate'>primary</div>\r\n            <div className='bg-primary-light p-2 truncate'>primaryLight</div>\r\n            <div className='bg-primary-active p-2 truncate'>primaryActive</div>\r\n            <div className='bg-secondary p-2 truncate'>secondary</div>\r\n            <div className='bg-positive p-2 truncate'>positive</div>\r\n            <div className='bg-negative p-2 truncate'>negative</div>\r\n            <div className='bg-primary-text p-2 truncate'>primaryText</div>\r\n            <div className='bg-secondary-text-text p-2 truncate'>\r\n              secondaryText\r\n            </div>\r\n            <div className='bg-link-text p-2 truncate'>linkText</div>\r\n            <div className='bg-primary-background p-2 truncate'>\r\n              primaryBackground\r\n            </div>\r\n            <div className='bg-sec-background p-2 truncate'>\r\n              secondaryBackground\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ThemeContext from '../ThemeContext';\r\n\r\nconst themeNames = ['base', 'dark', 'casual', 'vb', 'mixedFruit', 'carling'];\r\n\r\nexport function ThemeSwitcher() {\r\n  return (\r\n    <ThemeContext.Consumer>\r\n      {({ theme, switchTheme }) => (\r\n        <div className='flex justify-center'>\r\n          <div className='w-full md:w-1/3 px-3 mb-6 md:mb-6'>\r\n            <label\r\n              htmlFor='theme-select'\r\n              className='text-primary-text font-bold'\r\n            >\r\n              Theme switcher\r\n            </label>\r\n            <div className='relative'>\r\n              <select\r\n                id='theme-select'\r\n                className={`w-full block appearance-none bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500`}\r\n                onChange={switchTheme}\r\n                value={theme}\r\n              >\r\n                {themeNames.map((name) => {\r\n                  return (\r\n                    <option key={name} value={name}>\r\n                      {name}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <div className='pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700'>\r\n                <svg\r\n                  className='fill-current h-4 w-4'\r\n                  xmlns='http://www.w3.org/2000/svg'\r\n                  viewBox='0 0 20 20'\r\n                >\r\n                  <path d='M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z' />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </ThemeContext.Consumer>\r\n  );\r\n}\r\n","/* change to input checkbox */\r\nexport function Toggle({ toggle, active }) {\r\n  return (\r\n    <div\r\n      className={`w-16 h-10 rounded-full flex-shrink-0 p-1 ${\r\n        active ? 'bg-positive' : 'bg-gray-300'\r\n      }`}\r\n      onClick={toggle}\r\n    >\r\n      <div\r\n        className={`bg-white w-8 h-8 rounded-full shadow-md transform duration-300 ease-in-out ${\r\n          active ? 'translate-x-6' : ''\r\n        }`}\r\n      ></div>\r\n    </div>\r\n  );\r\n}\r\n","import { useQuery } from 'react-query';\r\nimport { fetchGamesByTournamentId, fetchTournamentById } from '../queries';\r\nimport { MatchGrid } from './MatchGrid';\r\n\r\nexport function TournamentDetail({ id }) {\r\n  const { data: games, isLoading: isLoadingGames } = useQuery(\r\n    ['gamesByTournamentId', id],\r\n    () => fetchGamesByTournamentId(id)\r\n  );\r\n  const { data: tournament, isLoading: isLoadingTournament } = useQuery(\r\n    ['tournamentsById', id],\r\n    () => fetchTournamentById(id)\r\n  );\r\n\r\n  const isLoading = isLoadingGames || isLoadingTournament;\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div>\r\n      <div>This is Tournament: {id}</div>\r\n      <>\r\n        <div>\r\n          details:\r\n          <pre>{JSON.stringify(tournament, null, 2)}</pre>\r\n        </div>\r\n        <>\r\n          <h2 className='text-lg'>Games</h2>\r\n          <MatchGrid games={games} />\r\n        </>\r\n      </>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/evt-placeholder.e1e8ba08.jpg\";","import { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport placeholderImg from '../assets/evt-placeholder.jpg';\r\nimport { fetchTournaments } from '../queries';\r\n/* sidebar on homepage */\r\nexport function TournamentList() {\r\n  const { isLoading, error, data } = useQuery('tournaments', fetchTournaments);\r\n  if (error) {\r\n    <div>Error with tournaments</div>;\r\n  }\r\n  return (\r\n    <>\r\n      <div>\r\n        <h3 className='text-right italic bg-sec-background pr-4'>Upcoming</h3>\r\n        {isLoading && <div>loading...</div>}\r\n        {!isLoading &&\r\n          data\r\n            .filter((event) => {\r\n              const date = new Date(event.date);\r\n              return date > new Date();\r\n            })\r\n            .map((t) => (\r\n              <Short key={`${t.id}`} id={t.id} title={t.title} date={t.date} />\r\n            ))}\r\n      </div>\r\n      <div>\r\n        <h3 className='text-right italic bg-sec-background pr-4'>Previous</h3>\r\n        {isLoading && <div>loading...</div>}\r\n        {!isLoading &&\r\n          data\r\n            .filter((event) => {\r\n              const date = new Date(event.date);\r\n              return date < new Date();\r\n            })\r\n            .map((t) => (\r\n              <Short key={`${t.id}`} id={t.id} title={t.title} date={t.date} />\r\n            ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Short({ image = '', id, title, date }) {\r\n  const shortDate = new Date(date).toLocaleDateString('en-GB');\r\n  return (\r\n    <div className='grid grid-cols-6 gap-4'>\r\n      <img\r\n        src={placeholderImg}\r\n        className='object-contain h-24 w-24 col-span-2'\r\n        alt='Event preview'\r\n      />\r\n      <div className='p-2 col-span-4 flex flex-col justify-between'>\r\n        <Link\r\n          to={`/tournaments/${id}`}\r\n          className='font-semibold text-link-text hover:underline'\r\n        >\r\n          {title}\r\n        </Link>\r\n        <span className='text-right font-bold'>{shortDate}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* \r\n      <figure className='relative col-span-2'>\r\n        <img\r\n          src={placeholderImg}\r\n          className='object-contain h-24 w-24'\r\n          alt='Event preview'\r\n        />\r\n        <figcaption className='absolute font-semibold text-white -mt-10'>\r\n          {date}\r\n        </figcaption>\r\n*/\r\n","import React, { useState, useEffect } from 'react';\r\nimport Joi from 'joi';\r\nimport { Button } from './Button';\r\nimport { Input } from './Input';\r\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\r\nimport { fetchPreferences, postPreferences } from '../queries';\r\nimport { useAuth } from '../hooks/useAuth';\r\n\r\nconst schema = Joi.object().keys({\r\n  avatar_link: Joi.string().trim().uri(),\r\n});\r\n\r\nexport function UserPreferences() {\r\n  const { user } = useAuth();\r\n  const [preferences, setPreferences] = useState({ avatarLink: '' });\r\n  const queryClient = useQueryClient();\r\n  const { isLoading, data, error } = useQuery(\r\n    ['preferences'],\r\n    fetchPreferences,\r\n    { enabled: !!user }\r\n  );\r\n  const mutation = useMutation(postPreferences, {\r\n    onError: (error) => {\r\n      setErrorMsg(error);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries('preferences');\r\n    },\r\n  });\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n\r\n  //name of property and value\r\n  const updatePreferences = (evt) => {\r\n    const { name, value } = evt.target;\r\n    setPreferences((old) => ({ ...old, [name]: value }));\r\n  };\r\n\r\n  const saveChanges = async (evt) => {\r\n    evt.preventDefault();\r\n    if (validPreferences()) {\r\n      //data that we be posting\r\n      const data = {\r\n        avatar_link: preferences.avatarLink,\r\n      };\r\n      mutation.mutate(data);\r\n    }\r\n  };\r\n\r\n  function validPreferences() {\r\n    const valid = schema.validate({\r\n      avatar_link: preferences.avatarLink,\r\n    });\r\n    if (valid.error === undefined) {\r\n      return true;\r\n    } else {\r\n      setErrorMsg(valid.error.message);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    //sync form state with react-query, or use uncontrolled components with a default?\r\n    if (data) {\r\n      setPreferences(data[0]);\r\n    }\r\n  }, [data]);\r\n\r\n  if (!user) {\r\n    return <div>Please log in to save personal preferences</div>;\r\n  }\r\n  return (\r\n    <form>\r\n      {isLoading && <span>Loading...</span>}\r\n      {error && <span>Error {JSON.stringify(error, null, 2)}</span>}\r\n      {!isLoading && (\r\n        <>\r\n          <Input\r\n            name='avatarLink'\r\n            label='Link to avatar'\r\n            value={preferences?.avatarLink}\r\n            onChange={updatePreferences}\r\n            errorMsg={errorMsg}\r\n          />\r\n          <Button\r\n            text='Save changes'\r\n            handleClick={saveChanges}\r\n            disabled={mutation.isLoading}\r\n          />\r\n        </>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Header } from '../components';\r\n\r\nexport function E404({ updatePageTitle }) {\r\n  useEffect(() => {\r\n    updatePageTitle('Error 404 page was not found');\r\n  });\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className='h-full'>E404 page not found</div>\r\n    </>\r\n  );\r\n}\r\n","import { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\n//import { useAuth } from '../hooks/useAuth';\r\nimport { Container, Header, Card, GamePlay, GameView } from '../components';\r\nimport { fetchGameById } from '../queries';\r\nimport { useQuery } from 'react-query';\r\n\r\n/*\r\n  only \"authorised\" users for this game should be able to save changes\r\n*/\r\n\r\n/* owner -> playerId, side -> home/away, how to calculate for 10 cups/team games */\r\nexport function Game({ updatePageTitle }) {\r\n  //const auth = useAuth();\r\n  //{JSON.stringify(auth.user)}\r\n  const { gameId } = useParams();\r\n  // might be nice to save first throw\r\n  // const [firstThrow, setFirstThrow] = useState(null)\r\n  const { isLoading, error, data } = useQuery(['game', gameId], () =>\r\n    fetchGameById(gameId)\r\n  );\r\n\r\n  useEffect(() => {\r\n    updatePageTitle(`Game: ${gameId}`);\r\n  }, [updatePageTitle, gameId]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container>\r\n        {error && <div>Error {gameId}</div>}\r\n        {isLoading && <div>Loading {gameId}</div>}\r\n        {!isLoading && (\r\n          <Card\r\n            title={\r\n              <CardTitle\r\n                home={data[0].home_name}\r\n                away={data[0].away_name}\r\n                number={data[0].id}\r\n              />\r\n            }\r\n          >\r\n            {data[0].locked && (\r\n              <div className='text-right' title='This game is locked'>\r\n                locked 🔒\r\n              </div>\r\n            )}\r\n            <div className='text-center'>\r\n              {data[0].tournament && (\r\n                <div>\r\n                  <div>{data[0].event}</div>\r\n                  <div>{data[0].stage}</div>\r\n                </div>\r\n              )}\r\n              <div>\r\n                <div>Venue: {data[0].venue}</div>\r\n                <div>Starting cups: 6</div>\r\n                {data[0].forfeit ? <div>Ended by forfeit</div> : null}\r\n                {data[0].notes && <div>Notes: {data[0].notes}</div>}\r\n              </div>\r\n            </div>\r\n            <div className='grid grid-cols-2 gap-4'>\r\n              <div>\r\n                <h2 className='font-bold text-center'>Home Results</h2>\r\n                <div>Name: {data[0].home_name}</div>\r\n                <div>Cups left: {data[0].home_cups_left}</div>\r\n              </div>\r\n              <div>\r\n                <h2 className='font-bold text-center'>Away Results</h2>\r\n                <div>Name: {data[0].away_name}</div>\r\n                <div>Cups left: {data[0].away_cups_left}</div>\r\n              </div>\r\n            </div>\r\n            {/* check for if table json in db needs a better check than just exists haha */}\r\n            {data[0]?.game_table ? (\r\n              !data[0].locked ? (\r\n                <GamePlay gameDetails={data[0]} access='' />\r\n              ) : (\r\n                <GameView gameDetails={data[0]} />\r\n              )\r\n            ) : (\r\n              <div className='text-center text-sm font-bold pt-4'>\r\n                Table state was not entered 😥\r\n              </div>\r\n            )}\r\n          </Card>\r\n        )}\r\n      </Container>\r\n      <div className='spacer py-8'></div>\r\n    </>\r\n  );\r\n}\r\n\r\n/*\r\n Flip button to help people know which cup is with\r\n slider to turn? or buttons? (turn 90.)\r\n*/\r\n\r\n/*\r\ntabbed interface for home/away? ON MOBILe View\r\nOr just one under each other\r\n\r\nSVG with circles as cups\r\n\r\non desktop show side by side\r\n\r\nchange home_cups_left/away_cups_left\r\nto home_cups_left\r\nlower case all _ID\r\npitchSize -> pitch_size\r\n*/\r\n\r\n/* \r\nhow to represent rearanges, need to make sure can haddle 10 & 6 cup games\r\n*/\r\n\r\nfunction CardTitle({ home, away, number }) {\r\n  return (\r\n    <div className='flex justify-between'>\r\n      <div className='text-3xl font-semibold text-left text-primary-text py-2'>\r\n        {home} vs {away}\r\n      </div>\r\n      <div>#{number}</div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from 'react';\r\nimport { useQuery } from 'react-query';\r\n\r\nimport { Button, Container, Header, MatchGrid } from '../components';\r\nimport { fetchGames } from '../queries';\r\n\r\nexport function Games({ updatePageTitle }) {\r\n  const { isLoading, error, data } = useQuery('games', fetchGames);\r\n  useEffect(() => {\r\n    updatePageTitle(`Game`);\r\n  }, [updatePageTitle]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container maxW='max-w-screen-md'>\r\n        <div className='text-center'>\r\n          <Button text='New Game' to='/games/new' />\r\n        </div>\r\n        {isLoading && <div>Loading games...</div>}\r\n        {!isLoading && <MatchGrid games={data} />}\r\n        {error && <div>Error trying to fetch games</div>}\r\n      </Container>\r\n      <div className='spacer py-8'></div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Header, Container, TournamentList, News } from '../components';\r\n\r\nexport function Home({ updatePageTitle }) {\r\n  useEffect(() => {\r\n    updatePageTitle(`Home`);\r\n  }, [updatePageTitle]);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container>\r\n        <div className='grid grid-cols-6 gap-4'>\r\n          <section className='col-span-6 md:col-span-4 space-y-6'>\r\n            <News />\r\n          </section>\r\n          <aside className='col-span-6 md:col-span-2 md:border-l-2 p-4'>\r\n            <h2>\r\n              <Link\r\n                to='/tournaments'\r\n                className='text-link-text hover:underline text-3xl font-semibold'\r\n              >\r\n                Events\r\n              </Link>\r\n            </h2>\r\n            <TournamentList />\r\n          </aside>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useReducer, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Joi from 'joi';\r\n\r\nimport {\r\n  Button,\r\n  buttonVariant,\r\n  buttonColor,\r\n  Card,\r\n  Checkbox,\r\n  Container,\r\n  Header,\r\n  InputNumber,\r\n  PlayerPicker,\r\n  Select,\r\n  Toggle,\r\n} from '../components';\r\nimport { createInitialCups } from '../tableMachine';\r\nimport { fetchPlayers, fetchVenues, postNewGame } from '../queries';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\n\r\n/* clicking on tournament match, would auto fill in game page if not played*/\r\n/* list of error msgs https://github.com/sideway/joi/blob/master/API.md#list-of-errors */\r\n\r\n/* advanced settings, teams (2 each)? would it be possible to do 3v1\r\n  turn into a wizard form instead?\r\n  how many players, player + their cups, next player\r\n  or just have a small + button to add new player to the team\r\n*/\r\n\r\nconst initialForm = {\r\n  player1: '',\r\n  player2: '',\r\n  venue: '',\r\n  gameSize: 6,\r\n  homeCupsLeft: 6,\r\n  awayCupsLeft: 6,\r\n  homeForfeit: false,\r\n  awayForfeit: false,\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'inputField':\r\n      return { ...state, [action.fieldName]: action.value };\r\n    case 'inputNumberField':\r\n      return { ...state, [action.fieldName]: Number(action.value) };\r\n    case 'inputCheckbox':\r\n      return { ...state, [action.fieldName]: action.checked };\r\n    case 'playerButton':\r\n      return { ...state, [action.fieldName]: Number(action.value) };\r\n    case 'selectField':\r\n      return { ...state, [action.fieldName]: Number(action.value) };\r\n    case 'initialise':\r\n      return { ...state };\r\n    default:\r\n      return { ...state };\r\n  }\r\n}\r\n\r\nexport function NewGame({ updatePageTitle }) {\r\n  let history = useHistory();\r\n  const queryClient = useQueryClient();\r\n  const { mutate } = useMutation(postNewGame, {\r\n    onError: (error) => {\r\n      setErrorMsg('Could not create game, please try again later.');\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries('games');\r\n      history.push(`/games/${data.id}`);\r\n    },\r\n  });\r\n  const minGameSize = 6;\r\n  const maxGameSize = 6;\r\n  const [formState, dispatch] = useReducer(reducer, initialForm);\r\n  const [pastGame, setPastGame] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const players = useQuery('players', fetchPlayers);\r\n  const venues = useQuery('venues', fetchVenues);\r\n\r\n  const selectPlayer = (name, value) => {\r\n    //how to prevent picking the same player?\r\n    dispatch({\r\n      type: 'playerButton',\r\n      fieldName: name,\r\n      value: value,\r\n    });\r\n    //reset error msg after interacting with button\r\n    if (errorMsg.length > 0) {\r\n      setErrorMsg('');\r\n    }\r\n  };\r\n\r\n  const handleSelect = (evt) => {\r\n    dispatch({\r\n      type: 'selectField',\r\n      fieldName: evt.target.name,\r\n      value: evt.target.value,\r\n    });\r\n    // naive reset error msg\r\n    if (errorMsg.length > 0) {\r\n      setErrorMsg('');\r\n    }\r\n  };\r\n\r\n  const handleChangeNumber = (evt) => {\r\n    dispatch({\r\n      type: 'inputNumberField',\r\n      fieldName: evt.target.name,\r\n      value: evt.target.value,\r\n    });\r\n    // naive reset error msg\r\n    if (errorMsg.length > 0) {\r\n      setErrorMsg('');\r\n    }\r\n  };\r\n\r\n  const handleToggle = () => {\r\n    // reset results\r\n    dispatch({\r\n      type: 'inputNumberField',\r\n      fieldName: 'homeCupsLeft',\r\n      value: formState['gameSize'],\r\n    });\r\n    dispatch({\r\n      type: 'inputNumberField',\r\n      fieldName: 'awayCupsLeft',\r\n      value: formState['gameSize'],\r\n    });\r\n    dispatch({\r\n      type: 'inputCheckbox',\r\n      fieldName: 'homeForfeit',\r\n      checked: false,\r\n    });\r\n    dispatch({\r\n      type: 'inputCheckbox',\r\n      fieldName: 'awayForfeit',\r\n      checked: false,\r\n    });\r\n    setPastGame(!pastGame);\r\n  };\r\n\r\n  const handleForfeitCheck = (evt) => {\r\n    dispatch({\r\n      type: 'inputCheckbox',\r\n      fieldName: evt.target.name,\r\n      checked: evt.target.checked,\r\n    });\r\n    if (evt.target.name.includes('home')) {\r\n      dispatch({\r\n        type: 'inputNumberField',\r\n        fieldName: 'homeCupsLeft',\r\n        value: 0,\r\n      });\r\n    } else if (evt.target.name.includes('away')) {\r\n      dispatch({\r\n        type: 'inputNumberField',\r\n        fieldName: 'awayCupsLeft',\r\n        value: 0,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (validForm()) {\r\n      const initialTable = {\r\n        homeCups: createInitialCups(formState.player1, 'home'),\r\n        preRackHomeCups: null,\r\n        awayCups: createInitialCups(formState.player2, 'away'),\r\n        preRackAwayCups: null,\r\n        firstThrow: null,\r\n        homeCupsLeft: 6,\r\n        homeCupRerackComplete: false,\r\n        homeCupRimCount: 0,\r\n        awayCupsLeft: 6,\r\n        awayCupRerackComplete: false,\r\n        awayCupRimCount: 0,\r\n        forfeit: false,\r\n        winner: null,\r\n        turns: 0,\r\n        selectedCup: null,\r\n        isHovering: false,\r\n        lastHover: { x: null, y: null },\r\n        cupNewPos: { x: null, y: null },\r\n        stack: [],\r\n      };\r\n      const values = {\r\n        ...formState,\r\n        created: new Date(),\r\n        table: pastGame ? null : initialTable,\r\n        locked: pastGame,\r\n      };\r\n      console.log(values);\r\n      mutate(values);\r\n    }\r\n  };\r\n\r\n  function validForm() {\r\n    if (formState.player1 !== formState.player2) {\r\n      const valid = schema.validate({\r\n        player1: formState.player1,\r\n        player2: formState.player2,\r\n        venue: formState.venue,\r\n        gameSize: formState.gameSize,\r\n        homeCupsLeft: formState.homeCupsLeft,\r\n        awayCupsLeft: formState.awayCupsLeft,\r\n        forfeit: formState.homeForfeit || formState.awayForfeit,\r\n      });\r\n      if (valid.error === undefined) {\r\n        return true;\r\n      } else {\r\n        // could check what type of error to make sure we create a good error for the user\r\n        setErrorMsg(valid.error.message);\r\n        return false;\r\n      }\r\n    } else {\r\n      setErrorMsg('Player 1 and Player 2 must be different!');\r\n    }\r\n  }\r\n\r\n  /* schema */\r\n  const schema = Joi.object().keys({\r\n    player1: Joi.number()\r\n      .required()\r\n      .messages({ 'number.base': 'Player 1 must be selected' }),\r\n    player2: Joi.number()\r\n      .required()\r\n      .messages({ 'number.base': 'Player 2 must be selected' }),\r\n    venue: Joi.number()\r\n      .required()\r\n      .messages({ 'number.base': 'venue is required' }),\r\n    gameSize: Joi.number()\r\n      .integer()\r\n      .less(maxGameSize + 1)\r\n      .greater(minGameSize - 1)\r\n      .required()\r\n      .messages({\r\n        'number.less': `Game size must be less than ${maxGameSize + 1}`,\r\n        'number.greater': `Game size must be more than ${minGameSize - 1}`,\r\n      }),\r\n    homeCupsLeft: Joi.number()\r\n      .integer()\r\n      .less(maxGameSize + 1)\r\n      .greater(-1)\r\n      .required()\r\n      .messages({\r\n        'number.less': `Maximum number of cups must be less than ${\r\n          maxGameSize + 1\r\n        }`,\r\n        'number.greater': `Minimum number of cups is 0!`,\r\n      }),\r\n    awayCupsLeft: Joi.number()\r\n      .integer()\r\n      .less(maxGameSize + 1)\r\n      .greater(-1)\r\n      .required()\r\n      .messages({\r\n        'number.less': `Maximum number of cups must be less than ${\r\n          maxGameSize + 1\r\n        }`,\r\n        'number.greater': `Minimum number of cups is 0!`,\r\n      }),\r\n    forfeit: Joi.boolean().required(),\r\n  });\r\n\r\n  useEffect(() => {\r\n    updatePageTitle('Friendlies');\r\n  }, [updatePageTitle]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container maxW='max-w-xl'>\r\n        {players.isLoading && <div>Loading players...</div>}\r\n        {!players.isLoading && (\r\n          <Card title='New friendly'>\r\n            <label htmlFor='player1'>Home:</label>\r\n            <PlayerPicker\r\n              name='player1'\r\n              playerNames={players.data}\r\n              selected={formState['player1']}\r\n              selectPlayer={selectPlayer}\r\n              variant={buttonVariant.regular}\r\n              color={buttonColor.outlined}\r\n              fullWidth\r\n            />\r\n            <label htmlFor='player2'>Away:</label>\r\n            <PlayerPicker\r\n              name='player2'\r\n              playerNames={players.data}\r\n              selected={formState['player2']}\r\n              selectPlayer={selectPlayer}\r\n              variant={buttonVariant.regular}\r\n              color={buttonColor.outlined}\r\n              fullWidth\r\n            />\r\n            <form onSubmit={handleSubmit} className='space-y-2'>\r\n              <input type='hidden' value={formState['player1']} />\r\n              <input type='hidden' value={formState['player2']} />\r\n              <label htmlFor='venue'>\r\n                Pick venue, or leave blank to fill later\r\n              </label>\r\n              {venues.isLoading && <div>Loading players...</div>}\r\n              {!venues.isLoading && (\r\n                <Select name='venue' onChange={handleSelect}>\r\n                  {venues.data.map((item) => {\r\n                    return (\r\n                      <option key={item.id} value={item.id}>\r\n                        {item.title}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </Select>\r\n              )}\r\n              <InputNumber\r\n                label='Number of starting cups'\r\n                name='gameSize'\r\n                value={formState['gameSize']}\r\n                min={minGameSize}\r\n                max={maxGameSize}\r\n                onChange={handleChangeNumber}\r\n              />\r\n              <div>\r\n                <p>Has the game already been completed?</p>\r\n                <div className='grid justify-center'>\r\n                  <Toggle toggle={handleToggle} active={pastGame} />\r\n                </div>\r\n              </div>\r\n              {pastGame && (\r\n                <div className='grid grid-cols-2 gap-4'>\r\n                  <div>\r\n                    <h2 className='font-bold text-center'>Home Results</h2>\r\n                    <div>Name: {players.data[formState.player1 - 1]?.name}</div>\r\n                    <InputNumber\r\n                      label='Home cups left'\r\n                      name='homeCupsLeft'\r\n                      value={formState['homeCupsLeft']}\r\n                      min={0}\r\n                      max={maxGameSize}\r\n                      onChange={handleChangeNumber}\r\n                    />\r\n                    <Checkbox\r\n                      label='forfeited?'\r\n                      name='homeForfeit'\r\n                      checked={formState['homeForfeit']}\r\n                      handleChange={handleForfeitCheck}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <h2 className='font-bold text-center'>Away Results</h2>\r\n                    <div>Name: {players.data[formState.player2 - 1]?.name}</div>\r\n                    <InputNumber\r\n                      label='Away cups left'\r\n                      name='awayCupsLeft'\r\n                      value={formState['awayCupsLeft']}\r\n                      min={0}\r\n                      max={maxGameSize}\r\n                      onChange={handleChangeNumber}\r\n                    />\r\n                    <Checkbox\r\n                      label='forfeited?'\r\n                      name='awayForfeit'\r\n                      checked={formState['awayForfeit']}\r\n                      handleChange={handleForfeitCheck}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {errorMsg.length > 0 && (\r\n                <p className='text-negative'>{errorMsg}</p>\r\n              )}\r\n              <div className='pt-4'>\r\n                <Button text='Create!' type='submit' fullWidth />\r\n              </div>\r\n            </form>\r\n          </Card>\r\n        )}\r\n      </Container>\r\n      <div className='spacer py-8'></div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { Header, Container, PlayerOverview, MatchGrid } from '../components';\r\n\r\n/* add last 5 games */\r\nexport function Player({ updatePageTitle }) {\r\n  const { playerId } = useParams();\r\n  const [loading, setLoading] = useState(true);\r\n  const [playerData, setPlayerData] = useState({});\r\n  const [playerOverview, setPlayerOverview] = useState([]);\r\n  const [playerRecords, setPlayerRecords] = useState([]);\r\n  const [playerNicks, setPlayerNicks] = useState([]);\r\n  const [recentGames, setRecentGames] = useState([]);\r\n\r\n  //set page title\r\n  useEffect(() => {\r\n    //probably fill this in with name / or doesnt exist after loaded player details\r\n    updatePageTitle(`Player: ${playerId}`);\r\n  }, [updatePageTitle, playerId]);\r\n\r\n  useEffect(() => {\r\n    const getPlayer = async () => {\r\n      fetchPlayer(playerId).then((player) => {\r\n        setPlayerData(player[0]);\r\n      });\r\n    };\r\n    const getOverview = async () => {\r\n      fetchPlayerOverview(playerId).then((overview) => {\r\n        setPlayerOverview(overview[0]);\r\n      });\r\n    };\r\n    const getRecords = async () => {\r\n      fetchPlayerRecords(playerId).then((records) => {\r\n        setPlayerRecords(records);\r\n      });\r\n    };\r\n    const getNicks = async () => {\r\n      fetchNicks(playerId).then((nicks) => {\r\n        setPlayerNicks(nicks);\r\n      });\r\n    };\r\n    const getRecentGames = async () => {\r\n      fetchRecentGames(playerId).then((recent) => {\r\n        setRecentGames(recent);\r\n      });\r\n    };\r\n    //if no parameter is passed to the route then its undefined\r\n    if (playerId != null) {\r\n      Promise.all([\r\n        getPlayer(),\r\n        getOverview(),\r\n        getRecords(),\r\n        getNicks(),\r\n        getRecentGames(),\r\n      ]).then((values) => {\r\n        setLoading(false);\r\n      });\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [playerId]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container maxW='max-w-screen-md'>\r\n        <div className='p-6 space-y-4'>\r\n          {loading ? 'loading...' : null}\r\n          {!loading && playerData ? (\r\n            <>\r\n              <div className='grid grid-cols-6 grid-rows-2 gap-2'>\r\n                <h2 className='text-xl font-bold bg-primary text-secondary-text px-4 py-2 col-span-2'>\r\n                  {playerData.name}\r\n                </h2>\r\n                <Link\r\n                  to={`/versus/${playerId}`}\r\n                  className='px-4 py-2 text-link-text underline'\r\n                >\r\n                  Compare!\r\n                </Link>\r\n                <span className='row-start-2 col-start-2 px-4'>nicks</span>\r\n                <ul className='row-start-2 col-start-3'>\r\n                  {playerNicks\r\n                    .filter((name) => name.nick !== playerData.name)\r\n                    .map((nick) => {\r\n                      return (\r\n                        <li key={`${nick.nick}${nick.id}`}>{nick.nick}</li>\r\n                      );\r\n                    })}\r\n                </ul>\r\n              </div>\r\n              <h2 className='text-lg font-bold'>Overview</h2>\r\n              <PlayerOverview details={[playerOverview]} />\r\n              {recentGames.length > 0 ? (\r\n                <>\r\n                  <h2 className='text-lg font-bold'>Recent games</h2>\r\n                  <MatchGrid games={recentGames} />\r\n                </>\r\n              ) : null}\r\n              {playerRecords.length > 0 ? (\r\n                <>\r\n                  <h2 className='text-lg font-bold'>Accolades</h2>\r\n                  {playerRecords.map((record) => {\r\n                    return <div key={record.id}>{record.label}🥇</div>;\r\n                  })}\r\n                </>\r\n              ) : null}\r\n            </>\r\n          ) : (\r\n            `Cannot find player data for playerId: ${playerId}`\r\n          )}\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nasync function fetchPlayer(playerId) {\r\n  const player = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/players/${playerId}`\r\n  );\r\n  const resp = await player.json();\r\n  return resp;\r\n}\r\n\r\nasync function fetchPlayerOverview(playerId) {\r\n  const overviewResp = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/overview/${playerId}`\r\n  );\r\n  const overview = await overviewResp.json();\r\n  return overview;\r\n}\r\n\r\nasync function fetchPlayerRecords(playerId) {\r\n  const records = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/records/player/${playerId}`\r\n  );\r\n  const resp = await records.json();\r\n  return resp;\r\n}\r\n\r\nasync function fetchNicks(playerId) {\r\n  const nicks = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/nicknames/player/${playerId}`\r\n  );\r\n  const resp = await nicks.json();\r\n  return resp;\r\n}\r\n\r\nasync function fetchRecentGames(playerId) {\r\n  const recentGames = await fetch(\r\n    `${process.env.REACT_APP_BACKEND_URL}/api/v1/games/recent/${playerId}`\r\n  );\r\n  const resp = await recentGames.json();\r\n  return resp;\r\n}\r\n","import { useEffect, useMemo } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { Container, Header } from '../components';\r\nimport { fetchRecords } from '../queries';\r\n\r\n/* like premier league stats centre */\r\n\r\nexport function Records({ updatePageTitle }) {\r\n  const { isLoading, error, data } = useQuery('tournaments', fetchRecords);\r\n  const groupedRecords = useMemo(() => {\r\n    let grouped = {};\r\n    if (data) {\r\n      data.forEach((record) => {\r\n        if (grouped[record.label]) {\r\n          grouped[record.label].push(record);\r\n        } else {\r\n          grouped[record.label] = record.label;\r\n          grouped[record.label] = [record];\r\n        }\r\n      });\r\n    }\r\n    return grouped;\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    updatePageTitle(`Records`);\r\n  }, [updatePageTitle]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container maxW='max-w-screen-md'>\r\n        {error && <div>Error loading records</div>}\r\n        {isLoading && <div>loading...</div>}\r\n        {!isLoading && (\r\n          <div className='grid grid-cols-2 md:grid-cols-4 gap-4'>\r\n            {Object.entries(groupedRecords).map(([key, value]) => {\r\n              return <RecordList key={key} recordType={key} records={value} />;\r\n            })}\r\n          </div>\r\n        )}\r\n      </Container>\r\n      <div className='spacer py-8'></div>\r\n    </>\r\n  );\r\n}\r\n\r\n// order by value\r\nfunction RecordList({ records, recordType }) {\r\n  return (\r\n    <div className='flex flex-col shadow p-4 space-y-4'>\r\n      <h2 className='text-lg pb-4'>{recordType}</h2>\r\n      {records.map((record, idx) => {\r\n        return <DisplayRecords key={`${record.label}${idx}`} record={record} />;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DisplayRecords({ record }) {\r\n  return (\r\n    <div className='flex flex-row justify-between border-b relative'>\r\n      <Link\r\n        className={`${\r\n          record.current && 'psudo-winner'\r\n        } text-link-text underline`}\r\n        to={`/players/${record.player_ID}`}\r\n      >\r\n        {record.name}\r\n      </Link>\r\n      <div>{record.value}</div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {\r\n  Card,\r\n  Container,\r\n  Header,\r\n  ThemeSwitcher,\r\n  UserPreferences,\r\n} from '../components';\r\n\r\nexport function Settings() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container>\r\n        <Card title='Local browser preferences'>\r\n          <ThemeSwitcher />\r\n        </Card>\r\n        <Card title='My preferences'>\r\n          <UserPreferences />\r\n        </Card>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport Joi from 'joi';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport { Card, Button, Container, Input, Decoration } from '../components';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { Logo } from '../components/Logo';\r\n\r\nconst schema = Joi.object().keys({\r\n  username: Joi.string()\r\n    .trim()\r\n    .regex(/^[a-zA-Z0-9_]+$/)\r\n    .min(2)\r\n    .max(30)\r\n    .required(),\r\n  password: Joi.string().trim().min(6).required(),\r\n});\r\n\r\nexport function SignIn({ updatePageTitle }) {\r\n  let history = useHistory();\r\n  let location = useLocation();\r\n  /* redirect from location, or redirect home */\r\n  let { from } = location.state || { from: { pathname: '/' } };\r\n  const auth = useAuth();\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n\r\n  const handleUsername = (evt) => setUsername(evt.target.value);\r\n  const handlePassword = (evt) => setPassword(evt.target.value);\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (validUser()) {\r\n      const signInCreds = {\r\n        username: username,\r\n        password: password,\r\n      };\r\n      try {\r\n        const signInResp = await auth.signIn(signInCreds);\r\n        // auth.user is set in the AuthProvider\r\n        if (signInResp.error) {\r\n          return setErrorMsg(\r\n            'Unable to login, please double check your credentials.'\r\n          );\r\n        }\r\n        history.replace(from);\r\n      } catch (err) {\r\n        setErrorMsg('Something went wrong!');\r\n      }\r\n    }\r\n  };\r\n\r\n  function validUser() {\r\n    const valid = schema.validate({\r\n      username: username,\r\n      password: password,\r\n    });\r\n    if (valid.error === undefined) {\r\n      return true;\r\n    } else {\r\n      //for sign in *should* be a generic message\r\n      setErrorMsg('Unable to login, please double check your credentials.');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    updatePageTitle('Sign in');\r\n  }, [updatePageTitle]);\r\n  return (\r\n    <Container maxW='max-w-screen-md'>\r\n      <div className='flex justify-center pb-4'>\r\n        <Logo />\r\n      </div>\r\n      <Card\r\n        title={\r\n          <div className='grid justify-center'>\r\n            <Decoration />\r\n            <h2 className='text-3xl font-semibold text-primary-text py-2'>\r\n              Sign in\r\n            </h2>\r\n          </div>\r\n        }\r\n      >\r\n        <form>\r\n          <Input\r\n            label='Username'\r\n            name='username'\r\n            required={true}\r\n            value={username}\r\n            onChange={handleUsername}\r\n          />\r\n          <Input\r\n            label='Password'\r\n            name='password'\r\n            type='password'\r\n            required={true}\r\n            value={password}\r\n            onChange={handlePassword}\r\n          />\r\n          <Link to='/' className='text-link-text hover:underline'>\r\n            Forgotten password?\r\n          </Link>\r\n          {errorMsg.length > 0 && <p className='text-negative'>{errorMsg}</p>}\r\n          <div className='pt-2'>\r\n            <Button\r\n              text='Sign in'\r\n              handleClick={handleSubmit}\r\n              color='outlined'\r\n              fullWidth\r\n            />\r\n          </div>\r\n          <Link to='/signup' className='text-link-text hover:underline'>\r\n            Or sign up here\r\n          </Link>\r\n        </form>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport Joi from 'joi';\r\n\r\nimport { Card, Button, Container, Input, Decoration } from '../components';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { Logo } from '../components/Logo';\r\n\r\nconst schema = Joi.object().keys({\r\n  username: Joi.string()\r\n    .trim()\r\n    .regex(/^[a-zA-Z0-9_]+$/)\r\n    .min(2)\r\n    .max(30)\r\n    .required(),\r\n  password: Joi.string().trim().min(6).required(),\r\n  confirmPassword: Joi.string().trim().min(6).required(),\r\n});\r\n\r\nexport function SignUp({ updatePageTitle }) {\r\n  let history = useHistory();\r\n  const auth = useAuth();\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n\r\n  const handleUsername = (evt) => setUsername(evt.target.value);\r\n  const handleEmail = (evt) => setEmail(evt.target.value);\r\n  const handlePassword = (evt) => setPassword(evt.target.value);\r\n  const handleConfirmPassword = (evt) => setConfirmPassword(evt.target.value);\r\n\r\n  const handleSubmit = async (evt) => {\r\n    evt.preventDefault();\r\n    if (validUser()) {\r\n      const newUserCreds = {\r\n        username: username,\r\n        password: password,\r\n      };\r\n      try {\r\n        //post to server\r\n        const signupResp = await auth.signUp(newUserCreds);\r\n        if (signupResp.error !== undefined) {\r\n          return setErrorMsg(signupResp.error);\r\n        }\r\n        //redirect to login page on successful account creation\r\n        history.push('/');\r\n      } catch (err) {\r\n        setErrorMsg('Something went wrong!');\r\n      }\r\n    }\r\n  };\r\n\r\n  function validUser() {\r\n    if (password === confirmPassword) {\r\n      const valid = schema.validate({\r\n        username: username,\r\n        password: password,\r\n        confirmPassword: confirmPassword,\r\n      });\r\n      if (valid.error === undefined) {\r\n        return true;\r\n      } else {\r\n        // could check what type of error to make sure we create a good error for the user\r\n        setErrorMsg(valid.error.message);\r\n        return false;\r\n      }\r\n    } else {\r\n      setErrorMsg('Password and Confirm password must be the same');\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    updatePageTitle('Sign up');\r\n  }, [updatePageTitle]);\r\n\r\n  return (\r\n    <Container maxW='max-w-screen-md'>\r\n      <div className='flex justify-center pb-4'>\r\n        <Logo />\r\n      </div>\r\n      <Card\r\n        title={\r\n          <div className='grid justify-center'>\r\n            <Decoration />\r\n            <h2 className='text-3xl font-semibold text-primary-text py-2'>\r\n              Sign up\r\n            </h2>\r\n          </div>\r\n        }\r\n      >\r\n        <form>\r\n          <Input\r\n            label='Username'\r\n            name='username'\r\n            required={true}\r\n            value={username}\r\n            onChange={handleUsername}\r\n            aria-describedby='usernameHelp'\r\n            helpText='Username must be between 2 and 30 characters. Alphanumeric and\r\n              underscores only.'\r\n          />\r\n          <Input\r\n            label='Email address'\r\n            name='email'\r\n            type='email'\r\n            value={email}\r\n            onChange={handleEmail}\r\n          />\r\n          <Input\r\n            label='Password'\r\n            name='password'\r\n            minLength='6'\r\n            type='password'\r\n            required\r\n            value={password}\r\n            onChange={handlePassword}\r\n            aria-describedby='passwordHelp'\r\n            helpText='Password must be at least 6 characters.'\r\n          />\r\n\r\n          <Input\r\n            label='Confirm Password'\r\n            name='confirmPassword'\r\n            minLength='6'\r\n            type='password'\r\n            required\r\n            value={confirmPassword}\r\n            onChange={handleConfirmPassword}\r\n          />\r\n          {errorMsg.length > 0 && <p className='text-negative'>{errorMsg}</p>}\r\n          <div className='pt-2'>\r\n            <Button\r\n              text='Sign up'\r\n              handleClick={handleSubmit}\r\n              color='outlined'\r\n              fullWidth\r\n            />\r\n          </div>\r\n          <Link to='/signin' className='text-link-text hover:underline'>\r\n            Or sign in here\r\n          </Link>\r\n        </form>\r\n      </Card>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Header,\r\n  TournamentList,\r\n  TournamentDetail,\r\n} from '../components';\r\n\r\nexport function Tournament({ updatePageTitle }) {\r\n  const { tournamentId } = useParams();\r\n\r\n  useEffect(() => {\r\n    updatePageTitle(`Tournament: ${tournamentId}`);\r\n  }, [updatePageTitle, tournamentId]);\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container>\r\n        {tournamentId ? (\r\n          <TournamentDetail id={tournamentId} />\r\n        ) : (\r\n          <TournamentList />\r\n        )}\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\n/* \r\nNew tournament or new game button should look like this Group-hover element\r\nhttps://tailwindcss.com/docs/pseudo-class-variants\r\n*/\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory } from 'react-router';\r\n\r\nimport {\r\n  Card,\r\n  Match,\r\n  PlayerPicker,\r\n  PlayerOverview,\r\n  Header,\r\n  Container,\r\n} from '../components';\r\nimport { fetchPlayerOverview, fetchPlayers } from '../queries';\r\n\r\nexport function Versus({ updatePageTitle }) {\r\n  let history = useHistory();\r\n  const [players, setPlayers] = useState({\r\n    player1: '',\r\n    player2: '',\r\n  });\r\n  const {\r\n    isLoading: loadingPlayerList,\r\n    error: errorPlayerList,\r\n    data: playerList,\r\n  } = useQuery('players', fetchPlayers);\r\n\r\n  const [gameData, setGameData] = useState([]);\r\n  const [playerOverview, setPlayerOverview] = useState([]);\r\n\r\n  const selectPlayer = useCallback(\r\n    (name, value) => {\r\n      //how to prevent picking the same player?\r\n      setPlayers((previous) => ({ ...previous, [name]: value }));\r\n      // split path\r\n      const sp = history.location.pathname.split('/');\r\n      fetchPlayerOverview(value).then((overview) => {\r\n        if (name === 'player1') {\r\n          if (isIntOrStringInt(value)) {\r\n            setPlayerOverview((previous) => {\r\n              return previous.length > 1\r\n                ? [overview[0], previous[1]]\r\n                : [overview[0]];\r\n            });\r\n            history.push(`${[sp[0], sp[1], value, sp[3]].join('/')}`);\r\n          } else {\r\n            history.push(`${[sp[0], sp[1]].join('/')}`);\r\n          }\r\n        } else {\r\n          if (isIntOrStringInt(value)) {\r\n            setPlayerOverview((previous) => [previous[0], overview[0]]);\r\n            history.push(`${[sp[0], sp[1], sp[2], value].join('/')}`);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    [history]\r\n  );\r\n\r\n  const goCompare = (player1, player2) => {\r\n    if (player1.length > 0 && player2.length > 0) {\r\n      fetch(\r\n        `${process.env.REACT_APP_BACKEND_URL}/api/v1/versus/${player1}/${player2}`\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setGameData(data);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    updatePageTitle('Compare player stats');\r\n  }, [updatePageTitle]);\r\n\r\n  useEffect(() => {\r\n    // joi validation for path?\r\n    const splitPath = window.location.pathname.split('/');\r\n    const player1Id = splitPath[2];\r\n    const player2Id = splitPath[3];\r\n    // maybe move check for exist into selectPlayer\r\n    if (!loadingPlayerList) {\r\n      if (playerList.length > 0) {\r\n        let player1Exists = playerList.some(\r\n          (player) => player.id === Number(player1Id)\r\n        );\r\n        if (player1Exists) {\r\n          selectPlayer('player1', player1Id);\r\n          // if player exists then check player 2\r\n          if (isIntOrStringInt(player2Id)) {\r\n            let player2Exists = playerList.some(\r\n              (player) => player.id === Number(player2Id)\r\n            );\r\n            if (player2Exists) {\r\n              selectPlayer('player2', player2Id);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, [playerList, selectPlayer, loadingPlayerList]);\r\n\r\n  //when player changes goCompare\r\n  useEffect(() => {\r\n    if (players.player1.length > 0 && players.player2.length > 0) {\r\n      goCompare(players.player1, players.player2);\r\n    }\r\n  }, [players]);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Container>\r\n        <Card title='Player search'>\r\n          {errorPlayerList && <span>Error grabbing player list</span>}\r\n          <div className='flex justify-around p-2'>\r\n            <PlayerPicker\r\n              playerNames={playerList}\r\n              selected={players['player1']}\r\n              name='player1'\r\n              selectPlayer={selectPlayer}\r\n            />\r\n            <PlayerPicker\r\n              playerNames={playerList}\r\n              selected={players['player2']}\r\n              name='player2'\r\n              selectPlayer={selectPlayer}\r\n              disabled={players.player1.length < 1}\r\n            />\r\n          </div>\r\n        </Card>\r\n        {players.player1.length > 0 || players.player2.length > 0 ? (\r\n          <>\r\n            <Card title='Overview'>\r\n              <PlayerOverview details={playerOverview} />\r\n            </Card>\r\n            <Card title='Games'>\r\n              <div className='grid md:grid-cols-3 gap-4'>\r\n                {gameData.length > 0 ? (\r\n                  gameData.map((game) => <Match key={game.id} details={game} />)\r\n                ) : (\r\n                  <div>No games played ⚠</div>\r\n                )}\r\n              </div>\r\n            </Card>\r\n          </>\r\n        ) : null}\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction isIntOrStringInt(param) {\r\n  return param === '' ? false : Number.isInteger(Number(param));\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Button, Header, Card, Match, Container, Swatch } from '../components';\r\nimport { AuthContext } from '../AuthContext';\r\n\r\nexport function Test({ updatePageTitle }) {\r\n  const testGame = {\r\n    home_name: 'home player',\r\n    home_ID: 1,\r\n    homeCupsLeft: 0,\r\n    away_name: 'away player',\r\n    away_ID: 2,\r\n    awayCupsLeft: 3,\r\n    event: 'some event',\r\n    date: 'new Date()',\r\n    venue: 'soeme venue',\r\n    notes: 'notes',\r\n  };\r\n\r\n  useEffect(() => {\r\n    //probably fill this in with name / or doesnt exist after loaded player details\r\n    updatePageTitle(`Test components page`);\r\n  }, [updatePageTitle]);\r\n  return (\r\n    <AuthContext.Consumer>\r\n      {({ user }) => (\r\n        <>\r\n          <Header />\r\n          <Container>\r\n            <div>\r\n              Auth check:\r\n              {user === null || user === undefined\r\n                ? 'You can log in here or search for a user!'\r\n                : `hi ${user.username}`}\r\n            </div>\r\n            <div className='text-center space-y-2'>\r\n              <div>\r\n                <Button variant='square' text='square button' />\r\n              </div>\r\n              <div>\r\n                <Button\r\n                  variant='square'\r\n                  color='outlined'\r\n                  text='square button outlined'\r\n                />\r\n              </div>\r\n              <div>\r\n                <Button text='regular button' color='outlined' />\r\n              </div>\r\n              <div>\r\n                <Button text='disabled button' color='outlined' disabled />\r\n              </div>\r\n              <div>\r\n                <Button text='link as button' to='/test' color='outlined' />\r\n              </div>\r\n              <div>\r\n                <Button\r\n                  text='square link as button'\r\n                  to='/test'\r\n                  variant='square'\r\n                  color='outlined'\r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <Card title='title of cart'>can take children</Card>\r\n            </div>\r\n            <div>\r\n              <Match details={testGame} />\r\n            </div>\r\n            <div>\r\n              <Card title='Match'>\r\n                <Match details={testGame} />\r\n              </Card>\r\n            </div>\r\n            <div></div>\r\n            <Swatch />\r\n          </Container>\r\n        </>\r\n      )}\r\n    </AuthContext.Consumer>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport { ReactQueryDevtools } from 'react-query/devtools';\r\n\r\nimport { ThemeProvider } from './ThemeProvider';\r\nimport { AuthProvider } from './AuthProvider';\r\nimport { applyTheme, DEFAULT_THEME } from './theme';\r\nimport {\r\n  E404,\r\n  Game,\r\n  Games,\r\n  Home,\r\n  NewGame,\r\n  Player,\r\n  Settings,\r\n  Tournament,\r\n  Versus,\r\n  SignIn,\r\n  SignUp,\r\n  Test,\r\n  Records,\r\n} from './pages';\r\nimport { LoggedOutRoute } from './components/LoggedOutRoute';\r\nimport { AuthorisedRoute, Refreshing } from './components';\r\n\r\n/* could try lazy loading protected routes like NewGame? */\r\n\r\nconst defaultTheme = () => {\r\n  if (localStorage.getItem('tw-bp:theme')) {\r\n    return localStorage.getItem('tw-bp:theme');\r\n  }\r\n  /* dark theme needs work before it should be default */\r\n  return DEFAULT_THEME;\r\n  /*   if (window.matchMedia && window.matchMedia('prefers-color-scheme: dark')) {\r\n    return 'dark';\r\n  } else {\r\n    return DEFAULT_THEME;\r\n  } */\r\n};\r\n\r\nconst queryClient = new QueryClient();\r\n\r\nfunction App() {\r\n  //probably want a authentication provider so in <Route render can redirect depending if logged in or not\r\n  //if its null, its not loaded yet. if undefined user not logge in\r\n  const [theme, setTheme] = useState(defaultTheme);\r\n  const [pageTitle, setPageTitle] = useState('');\r\n  const updatePageTitle = (newTitle) => setPageTitle(newTitle);\r\n  const changeTheme = (evt) => {\r\n    localStorage.setItem('tw-bp:theme', evt.target.value);\r\n    setTheme(evt.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    applyTheme(theme);\r\n  }, [theme]);\r\n\r\n  useEffect(() => {\r\n    document.title = pageTitle;\r\n  }, [pageTitle]);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme} changeTheme={changeTheme}>\r\n      <AuthProvider>\r\n        <QueryClientProvider client={queryClient}>\r\n          <Refreshing />\r\n          <Router>\r\n            <Switch>\r\n              <Route path='/versus/:player1Id(\\d+)?/:player2Id(\\d+)?'>\r\n                <Versus updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/player/:playerId(\\d+)?'>\r\n                <Player updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/records/'>\r\n                <Records updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/games/' exact>\r\n                <Games updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <AuthorisedRoute path='/games/new'>\r\n                <NewGame updatePageTitle={updatePageTitle} />\r\n              </AuthorisedRoute>\r\n              <AuthorisedRoute path='/games/:gameId(\\d+)'>\r\n                <Game updatePageTitle={updatePageTitle} />\r\n              </AuthorisedRoute>\r\n              <Route path='/tournaments' exact>\r\n                <Tournament updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/tournaments/:tournamentId(\\d+)'>\r\n                <Tournament updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/settings'>\r\n                <Settings updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <LoggedOutRoute path='/signin'>\r\n                <SignIn updatePageTitle={updatePageTitle} />\r\n              </LoggedOutRoute>\r\n              <LoggedOutRoute path='/signup'>\r\n                <SignUp updatePageTitle={updatePageTitle} />\r\n              </LoggedOutRoute>\r\n              <Route path='/test'>\r\n                <Test updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/' exact>\r\n                <Home updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n              <Route path='/*'>\r\n                <E404 updatePageTitle={updatePageTitle} />\r\n              </Route>\r\n            </Switch>\r\n          </Router>\r\n          <ReactQueryDevtools />\r\n        </QueryClientProvider>\r\n      </AuthProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './assets/tailwind.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}